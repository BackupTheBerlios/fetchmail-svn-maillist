From svn at mknod.org  Fri Jun 13 18:19:18 2008
From: svn at mknod.org (svn at mknod.org)
Date: Fri, 13 Jun 2008 11:19:18 -0500 (CDT)
Subject: [fetchmail-svn] r5190 - in branches/BRANCH_6-3: . po
Message-ID: <20080613161918.771456B007F@mknod.org>

Author: m-a
Date: 2008-06-13 11:19:18 -0500 (Fri, 13 Jun 2008)
New Revision: 5190

Added:
   branches/BRANCH_6-3/.gitignore
   branches/BRANCH_6-3/po/.gitignore
Log:
Add ignore files.


Added: branches/BRANCH_6-3/.gitignore
===================================================================
--- branches/BRANCH_6-3/.gitignore	2008-05-29 08:10:26 UTC (rev 5189)
+++ branches/BRANCH_6-3/.gitignore	2008-06-13 16:19:18 UTC (rev 5190)
@@ -0,0 +1,20 @@
+ABOUT-NLS
+aclocal.m4
+autom4te.cache
+build*/
+compile
+config.guess
+config.h.in
+config.rpath
+config.sub
+configure
+cscope.out
+depcomp
+install-sh
+Makefile.in
+m4/
+missing
+mkinstalldirs
+py-compile
+tags
+ylwrap

Added: branches/BRANCH_6-3/po/.gitignore
===================================================================
--- branches/BRANCH_6-3/po/.gitignore	2008-05-29 08:10:26 UTC (rev 5189)
+++ branches/BRANCH_6-3/po/.gitignore	2008-06-13 16:19:18 UTC (rev 5190)
@@ -0,0 +1,9 @@
+Makefile.in.in
+Makevars.template
+Rules-quot
+boldquot.sed
+en at boldquot.header
+en at quot.header
+insert-header.sin
+quot.sed
+remove-potcdate.sin



From svn at mknod.org  Fri Jun 13 18:20:29 2008
From: svn at mknod.org (svn at mknod.org)
Date: Fri, 13 Jun 2008 11:20:29 -0500 (CDT)
Subject: [fetchmail-svn] r5191 - branches/BRANCH_6-3/po
Message-ID: <20080613162029.E74216B007F@mknod.org>

Author: m-a
Date: 2008-06-13 11:20:29 -0500 (Fri, 13 Jun 2008)
New Revision: 5191

Modified:
   branches/BRANCH_6-3/po/.gitignore
Log:
Ignore fetchmail.pot and *.gmo files, too.


Modified: branches/BRANCH_6-3/po/.gitignore
===================================================================
--- branches/BRANCH_6-3/po/.gitignore	2008-06-13 16:19:18 UTC (rev 5190)
+++ branches/BRANCH_6-3/po/.gitignore	2008-06-13 16:20:29 UTC (rev 5191)
@@ -7,3 +7,5 @@
 insert-header.sin
 quot.sed
 remove-potcdate.sin
+*.gmo
+fetchmail.pot



From svn at mknod.org  Fri Jun 13 18:20:39 2008
From: svn at mknod.org (svn at mknod.org)
Date: Fri, 13 Jun 2008 11:20:39 -0500 (CDT)
Subject: [fetchmail-svn] r5192 - branches/BRANCH_6-3
Message-ID: <20080613162039.B48C06B007F@mknod.org>

Author: m-a
Date: 2008-06-13 11:20:39 -0500 (Fri, 13 Jun 2008)
New Revision: 5192

Modified:
   branches/BRANCH_6-3/driver.c
Log:
FIXME: (driver.c::fetchmessages) mark wholesize and separatefetchbody to be unified.


Modified: branches/BRANCH_6-3/driver.c
===================================================================
--- branches/BRANCH_6-3/driver.c	2008-06-13 16:20:29 UTC (rev 5191)
+++ branches/BRANCH_6-3/driver.c	2008-06-13 16:20:39 UTC (rev 5192)
@@ -580,6 +580,9 @@
 	}
 	else
 	{
+	  /* XXX FIXME: make this one variable, wholesize and
+	     separatefetchbody query the same variable just with
+	     inverted logic */
 	    flag wholesize = !ctl->server.base_protocol->fetch_body;
 	    flag separatefetchbody = (ctl->server.base_protocol->fetch_body) ? TRUE : FALSE;
 



From svn at mknod.org  Fri Jun 13 18:20:49 2008
From: svn at mknod.org (svn at mknod.org)
Date: Fri, 13 Jun 2008 11:20:49 -0500 (CDT)
Subject: [fetchmail-svn] r5193 - branches/BRANCH_6-3
Message-ID: <20080613162049.5F8626B007F@mknod.org>

Author: m-a
Date: 2008-06-13 11:20:49 -0500 (Fri, 13 Jun 2008)
New Revision: 5193

Added:
   branches/BRANCH_6-3/fetchmail-SA-2008-01.txt
Modified:
   branches/BRANCH_6-3/NEWS
   branches/BRANCH_6-3/report.c
Log:
Fix Novell Bug #354291, fetchmail crashes in -v -v mode when logging long To:
headers (in excess of 2048 bytes).


Modified: branches/BRANCH_6-3/NEWS
===================================================================
--- branches/BRANCH_6-3/NEWS	2008-06-13 16:20:39 UTC (rev 5192)
+++ branches/BRANCH_6-3/NEWS	2008-06-13 16:20:49 UTC (rev 5193)
@@ -54,6 +54,14 @@
   This bug was apparently introduced on 1998-11-27 when the bouncemail facility
   was modularized. The bug then made its appearance in fetchmail release 4.6.8.
   See also fetchmail-SA-2007-02.txt.
+* CVE-2008-XXXX: Denial of service: When fetchmail logs data blobs
+  (for instance, a To: header in -v -v verbose mode) in excess of 2048
+  bytes, it will crash, because it hands an uninitialized argument
+  pointer (not the format string though) to vsnprintf and reads a
+  random memory location (it calls va_arg() too often without
+  resetting it with va_start()). Based on a patch by Petr Uzel, fixes
+  Novell Bug #354291.
+  See also fetchmail-SA-2008-01.txt.
 
 # CRITICAL BUG FIX:
 * When expunging, mark the right messages as seen to avoid message loss in "keep

Added: branches/BRANCH_6-3/fetchmail-SA-2008-01.txt
===================================================================
--- branches/BRANCH_6-3/fetchmail-SA-2008-01.txt	2008-06-13 16:20:39 UTC (rev 5192)
+++ branches/BRANCH_6-3/fetchmail-SA-2008-01.txt	2008-06-13 16:20:49 UTC (rev 5193)
@@ -0,0 +1,148 @@
+fetchmail-SA-2008-01: Crash on large log messages in verbose mode
+
+Topics:		Crash in large log messages in verbose mode.
+
+Author:		Matthias Andree
+Version:	1.0
+Announced:
+Type:		Dereferencing garbage pointer trigged by outside circumstances
+Impact:		denial of service possible
+Danger:		low
+CVSS V2 vector: (AV:N/AC:M/Au:N/C:N/I:N/A:C/E:P/RL:O/RC:C)
+
+Credits:	Petr Uzel (fix), Petr Cerny (analysis), Gunter Nau (bug report)
+CVE Name:	XXX
+URL:		http://www.fetchmail.info/fetchmail-SA-2008-01.txt
+Project URL:	http://www.fetchmail.info/
+
+Affects:	fetchmail release < 6.3.9 exclusively
+
+Not affected:	fetchmail release 6.3.9 and newer
+		systems without varargs (stdargs.h) support.
+
+Corrected:	2008-06-13 fetchmail SVN (rev XXX)
+
+References:	<https://bugzilla.novell.com/show_bug.cgi?id=354291>
+		<http://developer.berlios.de/patch/?func=detailpatch&patch_id=2492&group_id=1824>
+
+0. Release history
+==================
+
+2008-06-13 1.0	first draft for MITRE/CVE (visible in SVN)
+
+
+1. Background
+=============
+
+fetchmail is a software package to retrieve mail from remote POP2, POP3,
+IMAP, ETRN or ODMR servers and forward it to local SMTP, LMTP servers or
+message delivery agents.
+
+fetchmail ships with a graphical, Python/Tkinter based configuration
+utility named "fetchmailconf" to help the user create configuration (run
+control) files for fetchmail.
+
+
+2. Problem description and Impact
+=================================
+
+Gunter Nau reported fetchmail crashing on some messages; further
+debugging by Petr Uzel and Petr Cerny at Novell/SUSE Czech Republic
+dug up that this happened when fetchmail was trying to print, in -v -v
+verbose level, headers exceeding 2048 bytes. In this situation,
+fetchmail would resize the buffer and fill in further parts of the
+message, but forget to reinitialize its va_list typed source pointer,
+thus reading data from a garbage address found on the stack at
+addresses above the function arguments the caller passed in; usually
+that would be the caller's stack frame.
+
+It is unknown whether code can be injected remotely, but given that
+the segmentation fault is caused by read accesses, the relevant data
+is not under the remote attacker's control and no buffer overrun
+situation is present that would allow altering program /flow/, it is
+deemed rather unlikely that code can be injected.
+
+Note that the required -vv configuration at hand is both non-default
+and also not common in automated (cron job) setups, but usually used
+in manual debugging, so not many systems would be affected by the
+problem. Nonetheless, in vulnerable configurations, it is remotely
+exploitable to effect a denial of service attack.
+
+
+
+3. Solution
+===========
+
+There are two alternatives, either of them by itself is sufficient:
+
+a. Apply the patch found in section B of this announcement to
+   fetchmail 6.3.8, recompile and reinstall it.
+
+b. Install fetchmail 6.3.9 or newer when it becomes available.  The
+   fetchmail source code is available from
+   <http://developer.berlios.de/project/showfiles.php?group_id=1824>.
+
+
+4. Workaround
+=============
+
+Run fetchmail at low verbosity, avoid using two or three -v arguments;
+internal messages are short and do not contain external message
+sources so they do not cause buffer resizing. It is recommended to
+replace the vulnerable code by a fixed version (see previous
+section 3. Solution) as soon as reasonably possible.
+
+
+A. Copyright, License and Warranty
+==================================
+
+(C) Copyright 2008 by Matthias Andree, <matthias.andree at gmx.de>.
+Some rights reserved.
+
+This work is licensed under the Creative Commons
+Attribution-NonCommercial-NoDerivs German License. To view a copy of
+this license, visit http://creativecommons.org/licenses/by-nc-nd/2.0/de/
+or send a letter to Creative Commons; 559 Nathan Abbott Way;
+Stanford, California 94305; USA.
+
+THIS WORK IS PROVIDED FREE OF CHARGE AND WITHOUT ANY WARRANTIES.
+Use the information herein at your own risk.
+
+
+
+B. Patch to remedy the problem
+==============================
+
+diff --git a/report.c b/report.c
+index 31d4e48..2a731ac 100644
+--- a/report.c
++++ b/report.c
+@@ -238,11 +238,17 @@ report_build (FILE *errfp, message, va_alist)
+     rep_ensuresize();
+ 
+ #if defined(VA_START)
+-    VA_START (args, message);
+     for ( ; ; )
+     {
++	/*
++	 * args has to be initialized before every call of vsnprintf(), 
++	 * because vsnprintf() invokes va_arg macro and thus args is 
++	 * undefined after the call.
++	 */
++	VA_START(args, message);
+ 	n = vsnprintf (partial_message + partial_message_size_used, partial_message_size - partial_message_size_used,
+ 		       message, args);
++	va_end (args);
+ 
+ 	if (n >= 0
+ 	    && (unsigned)n < partial_message_size - partial_message_size_used)
+@@ -254,7 +260,6 @@ report_build (FILE *errfp, message, va_alist)
+ 	partial_message_size += 2048;
+ 	partial_message = REALLOC (partial_message, partial_message_size);
+     }
+-    va_end (args);
+ #else
+     for ( ; ; )
+     {
+
+END OF fetchmail-SA-2008-01.txt

Modified: branches/BRANCH_6-3/report.c
===================================================================
--- branches/BRANCH_6-3/report.c	2008-06-13 16:20:39 UTC (rev 5192)
+++ branches/BRANCH_6-3/report.c	2008-06-13 16:20:49 UTC (rev 5193)
@@ -238,11 +238,17 @@
     rep_ensuresize();
 
 #if defined(VA_START)
-    VA_START (args, message);
     for ( ; ; )
     {
+	/*
+	 * args has to be initialized before every call of vsnprintf(), 
+	 * because vsnprintf() invokes va_arg macro and thus args is 
+	 * undefined after the call.
+	 */
+	VA_START(args, message);
 	n = vsnprintf (partial_message + partial_message_size_used, partial_message_size - partial_message_size_used,
 		       message, args);
+	va_end (args);
 
 	if (n >= 0
 	    && (unsigned)n < partial_message_size - partial_message_size_used)
@@ -254,7 +260,6 @@
 	partial_message_size += 2048;
 	partial_message = REALLOC (partial_message, partial_message_size);
     }
-    va_end (args);
 #else
     for ( ; ; )
     {



From svn at mknod.org  Fri Jun 13 18:40:57 2008
From: svn at mknod.org (svn at mknod.org)
Date: Fri, 13 Jun 2008 11:40:57 -0500 (CDT)
Subject: [fetchmail-svn] r5194 - branches/BRANCH_6-3
Message-ID: <20080613164057.069426B007F@mknod.org>

Author: m-a
Date: 2008-06-13 11:40:56 -0500 (Fri, 13 Jun 2008)
New Revision: 5194

Modified:
   branches/BRANCH_6-3/fetchmail-SA-2008-01.txt
Log:
Reword fetchmail 6.3.9 availability.


Modified: branches/BRANCH_6-3/fetchmail-SA-2008-01.txt
===================================================================
--- branches/BRANCH_6-3/fetchmail-SA-2008-01.txt	2008-06-13 16:20:49 UTC (rev 5193)
+++ branches/BRANCH_6-3/fetchmail-SA-2008-01.txt	2008-06-13 16:40:56 UTC (rev 5194)
@@ -78,8 +78,8 @@
 a. Apply the patch found in section B of this announcement to
    fetchmail 6.3.8, recompile and reinstall it.
 
-b. Install fetchmail 6.3.9 or newer when it becomes available.  The
-   fetchmail source code is available from
+b. Install fetchmail 6.3.9 or newer after it will have become available.
+   The fetchmail source code is always available from
    <http://developer.berlios.de/project/showfiles.php?group_id=1824>.
 
 



From svn at mknod.org  Fri Jun 13 19:01:50 2008
From: svn at mknod.org (svn at mknod.org)
Date: Fri, 13 Jun 2008 12:01:50 -0500 (CDT)
Subject: [fetchmail-svn] r5195 - branches/BRANCH_6-3
Message-ID: <20080613170150.B7F496B007F@mknod.org>

Author: m-a
Date: 2008-06-13 12:01:50 -0500 (Fri, 13 Jun 2008)
New Revision: 5195

Modified:
   branches/BRANCH_6-3/Makefile.am
Log:
Add fetchmail-SA-2008-01.txt to DISTDOCS.


Modified: branches/BRANCH_6-3/Makefile.am
===================================================================
--- branches/BRANCH_6-3/Makefile.am	2008-06-13 16:40:56 UTC (rev 5194)
+++ branches/BRANCH_6-3/Makefile.am	2008-06-13 17:01:50 UTC (rev 5195)
@@ -127,6 +127,7 @@
 		fetchmail-features.html README.SSL README.NTLM \
 		README.packaging \
 		fetchmail-FAQ.book fetchmail-FAQ.pdf fetchmail-FAQ.html \
+		fetchmail-SA-2008-01.txt \
 		fetchmail-SA-2007-02.txt \
 		fetchmail-SA-2007-01.txt \
 		fetchmail-SA-2006-03.txt \



From svn at mknod.org  Tue Jun 17 14:43:03 2008
From: svn at mknod.org (svn at mknod.org)
Date: Tue, 17 Jun 2008 07:43:03 -0500 (CDT)
Subject: [fetchmail-svn] r5196 - branches/BRANCH_6-3
Message-ID: <20080617124303.A4AB86B010F@mknod.org>

Author: m-a
Date: 2008-06-17 07:43:03 -0500 (Tue, 17 Jun 2008)
New Revision: 5196

Modified:
   branches/BRANCH_6-3/NEWS
   branches/BRANCH_6-3/fetchmail-SA-2008-01.txt
Log:
Add CVE Name CVE-2008-2711 for fetchmail-SA-2008-01.

Modified: branches/BRANCH_6-3/NEWS
===================================================================
--- branches/BRANCH_6-3/NEWS	2008-06-13 17:01:50 UTC (rev 5195)
+++ branches/BRANCH_6-3/NEWS	2008-06-17 12:43:03 UTC (rev 5196)
@@ -54,7 +54,7 @@
   This bug was apparently introduced on 1998-11-27 when the bouncemail facility
   was modularized. The bug then made its appearance in fetchmail release 4.6.8.
   See also fetchmail-SA-2007-02.txt.
-* CVE-2008-XXXX: Denial of service: When fetchmail logs data blobs
+* CVE-2008-2711: Denial of service: When fetchmail logs data blobs
   (for instance, a To: header in -v -v verbose mode) in excess of 2048
   bytes, it will crash, because it hands an uninitialized argument
   pointer (not the format string though) to vsnprintf and reads a

Modified: branches/BRANCH_6-3/fetchmail-SA-2008-01.txt
===================================================================
--- branches/BRANCH_6-3/fetchmail-SA-2008-01.txt	2008-06-13 17:01:50 UTC (rev 5195)
+++ branches/BRANCH_6-3/fetchmail-SA-2008-01.txt	2008-06-17 12:43:03 UTC (rev 5196)
@@ -4,14 +4,14 @@
 
 Author:		Matthias Andree
 Version:	1.0
-Announced:
+Announced:	2008-06-17
 Type:		Dereferencing garbage pointer trigged by outside circumstances
 Impact:		denial of service possible
 Danger:		low
 CVSS V2 vector: (AV:N/AC:M/Au:N/C:N/I:N/A:C/E:P/RL:O/RC:C)
 
 Credits:	Petr Uzel (fix), Petr Cerny (analysis), Gunter Nau (bug report)
-CVE Name:	XXX
+CVE Name:	CVE-2008-2711
 URL:		http://www.fetchmail.info/fetchmail-SA-2008-01.txt
 Project URL:	http://www.fetchmail.info/
 
@@ -20,15 +20,18 @@
 Not affected:	fetchmail release 6.3.9 and newer
 		systems without varargs (stdargs.h) support.
 
-Corrected:	2008-06-13 fetchmail SVN (rev XXX)
+Corrected:	2008-06-13 fetchmail SVN (rev 5193)
 
 References:	<https://bugzilla.novell.com/show_bug.cgi?id=354291>
 		<http://developer.berlios.de/patch/?func=detailpatch&patch_id=2492&group_id=1824>
 
+
 0. Release history
 ==================
 
-2008-06-13 1.0	first draft for MITRE/CVE (visible in SVN)
+2008-06-13 1.0	first draft for MITRE/CVE (visible in SVN,
+		posted to oss-security)
+2008-06-17 1.0	published on http://www.fetchmail.info/
 
 
 1. Background



From svn at mknod.org  Tue Jun 17 14:43:55 2008
From: svn at mknod.org (svn at mknod.org)
Date: Tue, 17 Jun 2008 07:43:55 -0500 (CDT)
Subject: [fetchmail-svn] r5197 - in branches/BRANCH_6-3: . website
	website/host-scripts
Message-ID: <20080617124355.019816B010F@mknod.org>

Author: m-a
Date: 2008-06-17 07:43:54 -0500 (Tue, 17 Jun 2008)
New Revision: 5197

Added:
   branches/BRANCH_6-3/website/
   branches/BRANCH_6-3/website/bighand.png
   branches/BRANCH_6-3/website/design-notes.html
   branches/BRANCH_6-3/website/esrs-design-notes.html
   branches/BRANCH_6-3/website/fetchmail-FAQ.html
   branches/BRANCH_6-3/website/fetchmail-FAQ.pdf
   branches/BRANCH_6-3/website/fetchmail-SA-2005-01.txt
   branches/BRANCH_6-3/website/fetchmail-SA-2005-02.txt
   branches/BRANCH_6-3/website/fetchmail-SA-2005-03.txt
   branches/BRANCH_6-3/website/fetchmail-SA-2006-01.txt
   branches/BRANCH_6-3/website/fetchmail-SA-2006-02.txt
   branches/BRANCH_6-3/website/fetchmail-SA-2006-03.txt
   branches/BRANCH_6-3/website/fetchmail-SA-2007-01.txt
   branches/BRANCH_6-3/website/fetchmail-SA-2007-02.txt
   branches/BRANCH_6-3/website/fetchmail-SA-2008-01.txt
   branches/BRANCH_6-3/website/fetchmail-features.html
   branches/BRANCH_6-3/website/fetchmail-man.html
   branches/BRANCH_6-3/website/fetchmail.png
   branches/BRANCH_6-3/website/host-scripts/
   branches/BRANCH_6-3/website/host-scripts/upload-website.sh
   branches/BRANCH_6-3/website/index.html
   branches/BRANCH_6-3/website/sitestyle.css
   branches/BRANCH_6-3/website/testservers.html
   branches/BRANCH_6-3/website/todo.html
Log:
Track website in separate SVN directory (mostly symlinks for now).

Added: branches/BRANCH_6-3/website/bighand.png
===================================================================
--- branches/BRANCH_6-3/website/bighand.png	2008-06-17 12:43:03 UTC (rev 5196)
+++ branches/BRANCH_6-3/website/bighand.png	2008-06-17 12:43:54 UTC (rev 5197)
@@ -0,0 +1 @@
+link ../bighand.png
\ No newline at end of file


Property changes on: branches/BRANCH_6-3/website/bighand.png
___________________________________________________________________
Name: svn:special
   + *

Added: branches/BRANCH_6-3/website/design-notes.html
===================================================================
--- branches/BRANCH_6-3/website/design-notes.html	2008-06-17 12:43:03 UTC (rev 5196)
+++ branches/BRANCH_6-3/website/design-notes.html	2008-06-17 12:43:54 UTC (rev 5197)
@@ -0,0 +1 @@
+link ../design-notes.html
\ No newline at end of file


Property changes on: branches/BRANCH_6-3/website/design-notes.html
___________________________________________________________________
Name: svn:special
   + *

Added: branches/BRANCH_6-3/website/esrs-design-notes.html
===================================================================
--- branches/BRANCH_6-3/website/esrs-design-notes.html	2008-06-17 12:43:03 UTC (rev 5196)
+++ branches/BRANCH_6-3/website/esrs-design-notes.html	2008-06-17 12:43:54 UTC (rev 5197)
@@ -0,0 +1 @@
+link ../esrs-design-notes.html
\ No newline at end of file


Property changes on: branches/BRANCH_6-3/website/esrs-design-notes.html
___________________________________________________________________
Name: svn:special
   + *

Added: branches/BRANCH_6-3/website/fetchmail-FAQ.html
===================================================================
--- branches/BRANCH_6-3/website/fetchmail-FAQ.html	2008-06-17 12:43:03 UTC (rev 5196)
+++ branches/BRANCH_6-3/website/fetchmail-FAQ.html	2008-06-17 12:43:54 UTC (rev 5197)
@@ -0,0 +1 @@
+link ../fetchmail-FAQ.html
\ No newline at end of file


Property changes on: branches/BRANCH_6-3/website/fetchmail-FAQ.html
___________________________________________________________________
Name: svn:special
   + *

Added: branches/BRANCH_6-3/website/fetchmail-FAQ.pdf
===================================================================
--- branches/BRANCH_6-3/website/fetchmail-FAQ.pdf	2008-06-17 12:43:03 UTC (rev 5196)
+++ branches/BRANCH_6-3/website/fetchmail-FAQ.pdf	2008-06-17 12:43:54 UTC (rev 5197)
@@ -0,0 +1 @@
+link ../build/fetchmail-FAQ.pdf
\ No newline at end of file


Property changes on: branches/BRANCH_6-3/website/fetchmail-FAQ.pdf
___________________________________________________________________
Name: svn:special
   + *

Added: branches/BRANCH_6-3/website/fetchmail-SA-2005-01.txt
===================================================================
--- branches/BRANCH_6-3/website/fetchmail-SA-2005-01.txt	2008-06-17 12:43:03 UTC (rev 5196)
+++ branches/BRANCH_6-3/website/fetchmail-SA-2005-01.txt	2008-06-17 12:43:54 UTC (rev 5197)
@@ -0,0 +1 @@
+link ../fetchmail-SA-2005-01.txt
\ No newline at end of file


Property changes on: branches/BRANCH_6-3/website/fetchmail-SA-2005-01.txt
___________________________________________________________________
Name: svn:special
   + *

Added: branches/BRANCH_6-3/website/fetchmail-SA-2005-02.txt
===================================================================
--- branches/BRANCH_6-3/website/fetchmail-SA-2005-02.txt	2008-06-17 12:43:03 UTC (rev 5196)
+++ branches/BRANCH_6-3/website/fetchmail-SA-2005-02.txt	2008-06-17 12:43:54 UTC (rev 5197)
@@ -0,0 +1 @@
+link ../fetchmail-SA-2005-02.txt
\ No newline at end of file


Property changes on: branches/BRANCH_6-3/website/fetchmail-SA-2005-02.txt
___________________________________________________________________
Name: svn:special
   + *

Added: branches/BRANCH_6-3/website/fetchmail-SA-2005-03.txt
===================================================================
--- branches/BRANCH_6-3/website/fetchmail-SA-2005-03.txt	2008-06-17 12:43:03 UTC (rev 5196)
+++ branches/BRANCH_6-3/website/fetchmail-SA-2005-03.txt	2008-06-17 12:43:54 UTC (rev 5197)
@@ -0,0 +1 @@
+link ../fetchmail-SA-2005-03.txt
\ No newline at end of file


Property changes on: branches/BRANCH_6-3/website/fetchmail-SA-2005-03.txt
___________________________________________________________________
Name: svn:special
   + *

Added: branches/BRANCH_6-3/website/fetchmail-SA-2006-01.txt
===================================================================
--- branches/BRANCH_6-3/website/fetchmail-SA-2006-01.txt	2008-06-17 12:43:03 UTC (rev 5196)
+++ branches/BRANCH_6-3/website/fetchmail-SA-2006-01.txt	2008-06-17 12:43:54 UTC (rev 5197)
@@ -0,0 +1 @@
+link ../fetchmail-SA-2006-01.txt
\ No newline at end of file


Property changes on: branches/BRANCH_6-3/website/fetchmail-SA-2006-01.txt
___________________________________________________________________
Name: svn:special
   + *

Added: branches/BRANCH_6-3/website/fetchmail-SA-2006-02.txt
===================================================================
--- branches/BRANCH_6-3/website/fetchmail-SA-2006-02.txt	2008-06-17 12:43:03 UTC (rev 5196)
+++ branches/BRANCH_6-3/website/fetchmail-SA-2006-02.txt	2008-06-17 12:43:54 UTC (rev 5197)
@@ -0,0 +1 @@
+link ../fetchmail-SA-2006-02.txt
\ No newline at end of file


Property changes on: branches/BRANCH_6-3/website/fetchmail-SA-2006-02.txt
___________________________________________________________________
Name: svn:special
   + *

Added: branches/BRANCH_6-3/website/fetchmail-SA-2006-03.txt
===================================================================
--- branches/BRANCH_6-3/website/fetchmail-SA-2006-03.txt	2008-06-17 12:43:03 UTC (rev 5196)
+++ branches/BRANCH_6-3/website/fetchmail-SA-2006-03.txt	2008-06-17 12:43:54 UTC (rev 5197)
@@ -0,0 +1 @@
+link ../fetchmail-SA-2006-03.txt
\ No newline at end of file


Property changes on: branches/BRANCH_6-3/website/fetchmail-SA-2006-03.txt
___________________________________________________________________
Name: svn:special
   + *

Added: branches/BRANCH_6-3/website/fetchmail-SA-2007-01.txt
===================================================================
--- branches/BRANCH_6-3/website/fetchmail-SA-2007-01.txt	2008-06-17 12:43:03 UTC (rev 5196)
+++ branches/BRANCH_6-3/website/fetchmail-SA-2007-01.txt	2008-06-17 12:43:54 UTC (rev 5197)
@@ -0,0 +1 @@
+link ../fetchmail-SA-2007-01.txt
\ No newline at end of file


Property changes on: branches/BRANCH_6-3/website/fetchmail-SA-2007-01.txt
___________________________________________________________________
Name: svn:special
   + *

Added: branches/BRANCH_6-3/website/fetchmail-SA-2007-02.txt
===================================================================
--- branches/BRANCH_6-3/website/fetchmail-SA-2007-02.txt	2008-06-17 12:43:03 UTC (rev 5196)
+++ branches/BRANCH_6-3/website/fetchmail-SA-2007-02.txt	2008-06-17 12:43:54 UTC (rev 5197)
@@ -0,0 +1 @@
+link ../fetchmail-SA-2007-02.txt
\ No newline at end of file


Property changes on: branches/BRANCH_6-3/website/fetchmail-SA-2007-02.txt
___________________________________________________________________
Name: svn:special
   + *

Added: branches/BRANCH_6-3/website/fetchmail-SA-2008-01.txt
===================================================================
--- branches/BRANCH_6-3/website/fetchmail-SA-2008-01.txt	2008-06-17 12:43:03 UTC (rev 5196)
+++ branches/BRANCH_6-3/website/fetchmail-SA-2008-01.txt	2008-06-17 12:43:54 UTC (rev 5197)
@@ -0,0 +1 @@
+link ../fetchmail-SA-2008-01.txt
\ No newline at end of file


Property changes on: branches/BRANCH_6-3/website/fetchmail-SA-2008-01.txt
___________________________________________________________________
Name: svn:special
   + *

Added: branches/BRANCH_6-3/website/fetchmail-features.html
===================================================================
--- branches/BRANCH_6-3/website/fetchmail-features.html	2008-06-17 12:43:03 UTC (rev 5196)
+++ branches/BRANCH_6-3/website/fetchmail-features.html	2008-06-17 12:43:54 UTC (rev 5197)
@@ -0,0 +1 @@
+link ../fetchmail-features.html
\ No newline at end of file


Property changes on: branches/BRANCH_6-3/website/fetchmail-features.html
___________________________________________________________________
Name: svn:special
   + *

Added: branches/BRANCH_6-3/website/fetchmail-man.html
===================================================================
--- branches/BRANCH_6-3/website/fetchmail-man.html	2008-06-17 12:43:03 UTC (rev 5196)
+++ branches/BRANCH_6-3/website/fetchmail-man.html	2008-06-17 12:43:54 UTC (rev 5197)
@@ -0,0 +1 @@
+link ../build/fetchmail-man.html
\ No newline at end of file


Property changes on: branches/BRANCH_6-3/website/fetchmail-man.html
___________________________________________________________________
Name: svn:special
   + *

Added: branches/BRANCH_6-3/website/fetchmail.png
===================================================================
(Binary files differ)


Property changes on: branches/BRANCH_6-3/website/fetchmail.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: branches/BRANCH_6-3/website/host-scripts/upload-website.sh
===================================================================
--- branches/BRANCH_6-3/website/host-scripts/upload-website.sh	2008-06-17 12:43:03 UTC (rev 5196)
+++ branches/BRANCH_6-3/website/host-scripts/upload-website.sh	2008-06-17 12:43:54 UTC (rev 5197)
@@ -0,0 +1,31 @@
+#! /bin/sh
+
+# Script to upload fetchmail website from SVN repository
+# (C) 2008 by Matthias Andree. GNU GPL v3.
+
+: ${BERLIOS_LOGIN=m-a}
+
+# abort on error
+set -e
+
+# cd to parent of script
+cd $(dirname "$0")
+cd ..
+
+echo "==>  Running sanity checks"
+# make sure we have no dangling symlinks
+if file * | egrep broken\|dangling ; then
+    echo "broken symlinks -> abort" >&2
+    exit 1
+fi
+
+echo "==>  Uploading website (rsync)"
+# upload
+rsync \
+    --chmod=ug=rwX,o=rX,Dg=s --copy-links --times --checksum --verbose \
+    --exclude host-scripts \
+    --exclude .svn --exclude '*~' --exclude '#*#' \
+    * \
+    "$BERLIOS_LOGIN at shell.berlios.de:/home/groups/fetchmail/htdocs/"
+
+echo "==>  Success."


Property changes on: branches/BRANCH_6-3/website/host-scripts/upload-website.sh
___________________________________________________________________
Name: svn:executable
   + *

Added: branches/BRANCH_6-3/website/index.html
===================================================================
--- branches/BRANCH_6-3/website/index.html	2008-06-17 12:43:03 UTC (rev 5196)
+++ branches/BRANCH_6-3/website/index.html	2008-06-17 12:43:54 UTC (rev 5197)
@@ -0,0 +1,285 @@
+<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
+    "http://www.w3.org/TR/html4/loose.dtd">
+<html>
+<head>
+<link rel="stylesheet" href="sitestyle.css" type="text/css">
+<meta name="description" content="The Fetchmail Project">
+<meta name="keywords" content="fetchmail, pop3, imap, email, mail">
+<meta name="MSSmartTagsPreventParsing" content="TRUE">
+<title>Fetchmail</title>
+</head>
+<body>
+
+<div id="Header">
+<table width="100%" cellpadding="0" summary="Canned page header">
+<tr>
+<td>Fetchmail</td>
+<td align="right"><!-- update date -->2008-06-17</td>
+</tr>
+</table>
+</div>
+
+<div id="Menu">
+	<hr/>
+	<a href="index.html" title="Main">Main</a><br />
+	<a href="fetchmail-features.html">Features</a><br />
+	<a href="fetchmail-man.html">Manual</a><br />
+	<a href="fetchmail-FAQ.html" title="Fetchmail FAQ">FAQ</a><br />
+	<a href="fetchmail-FAQ.pdf" title="Fetchmail FAQ as PDF">FAQ (PDF)</a><br />
+	<a href="design-notes.html">Design Notes</a><br />
+	<a href="http://developer.berlios.de/project/showfiles.php?group_id=1824">Download</a><br />
+	<a href="http://mknod.org/svn/fetchmail/">Development Code</a><br />
+	<a href="http://developer.berlios.de/projects/fetchmail/">Project Page</a><br />
+	<hr/>
+</div>
+
+<div id="Content">
+
+<img src="bighand.png" width="100" height="71" alt="logo: a hand presenting an envelope" align="right" />
+
+<h1>Fetchmail</h1>
+<!--
+<div style="background-color:#ffffff;color:#008000;"> <h1>fetchmail 6.3.6 release candidate #5</h1>
+<p>On 2006-12-19, <a
+href="http://mandree.home.pages.de/fetchmail/">fetchmail-6.3.6-rc5 was released</a>, fixing several annoying bugs. <a href="http://mandree.home.pages.de/fetchmail/NEWS-6.3.6-rc5.txt">Click here for details.</a></p> </div>
+-->
+
+<div style="background-color:#80ff80;color:#000000;">
+<h1>ADDITIONAL FIXES FOR FETCHMAIL 6.3.8 RELEASE</h1>
+<p>New 2008-06-17: After the fetchmail-6.3.8 release described below,
+two denial-of-service vulnerabilities (<a href="#cve-2007-4565">CVE-2007-4565</a>) were discovered, but a new
+release is not yet available. Patches are parts of the security announcements:</p>
+<ul>
+    <li><a href="#cve-2008-2711">CVE-2008-2711:</a> <a
+	href="fetchmail-SA-2008-01.txt">fetchmail-SA-2008-01.txt</a></li>
+    <li><a href="#cve-2007-4565">CVE-2007-4565:</a> <a
+	href="fetchmail-SA-2007-02.txt">fetchmail-SA-2007-02.txt</a></li>
+</ul>
+<p>On 2008-04-24, the <a href="fetchmail-FAQ.html">FAQ</a> <a
+    href="fetchmail-FAQ.pdf">(also available as PDF)</a>, <a
+    href="fetchmail-man.html">manual page</a> and <a href="fetchmail-SA-2007-01.txt">fetchmail-SA-2007-01.txt (CVE-2007-1558)</a> have been revised.</p>
+<p>On 2007-04-06, <a href="http://developer.berlios.de/project/showfiles.php?group_id=1824">fetchmail-6.3.8
+was released (this is the download link),</a> fixing up further fallout from the CVE-2006-5867 fix, fixing long-standing bugs, and strengthening the APOP client in response to CVE-2007-1558. <a href="https://developer.berlios.de/project/shownotes.php?group_id=1824&amp;release_id=12610">Click here to see the change details.</a></p> </div>
+
+<div style="background-color:#ffff80;color:#000000;font-size:80%;"> <h1>FETCHMAIL 6.2.X UNSUPPORTED AND VULNERABLE - USE 6.3.X INSTEAD</h1>
+<p>fetchmail 6.2.X versions are susceptible to CVE-2006-5867 and CVE-2007-1558 and should be replaced by the most current 6.3.X version. Support has been discontinued as of 2006-01-22.</p>
+
+<!--
+<p>On 2006-01-22, fetchmail 6.2.X has reached end of its support life. No
+further releases of 6.2.X versions will be made and no bug reports for 6.2.X
+will be accepted unless the bug persists in the 6.3.X releases. Users are asked
+to upgrade to the most current 6.3.X release; care was taken to keep 6.3.X as
+compatible as possible with 6.2.X to ensure a smooth upgrade experience. See
+above for 6.3.X release news.</p>
+-->
+
+</div>
+
+<div style="background-color:#ff8080;color:#000000;font-size:85%"> <h1>SECURITY ALERTS</h1>
+<p><strong>NEW</strong> <a name="cve-2008-2711" href="http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2008-2711">CVE-2008-2711:</a> Fetchmail can <a href="fetchmail-SA-2008-01.txt">crash in verbose mode when logging long message headers.</a> This bug will be fixed in release 6.3.9. For the nonce, use the <a href="fetchmail-SA-2008-01.txt">patch contained in the security announcement.</a></p>
+<p><a name="cve-2007-4565" href="http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2007-4565">CVE-2007-4565:</a> Fetchmail can <a href="fetchmail-SA-2007-02.txt">crash when the SMTP server refuses a warning message generated by fetchmail.</a> This bug was introduced in fetchmail 4.6.8 and will be fixed in release 6.3.9. For the nonce, use the <a href="fetchmail-SA-2007-02.txt">patch contained in this security announcement.</a></p>
+<p><a href="http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2007-1558">CVE-2007-1558:</a> Fetchmail's APOP client was found to <a href="fetchmail-SA-2007-01.txt">validate APOP challenges insufficiently, making man-in-the-middle attacks on APOP secrets unnecessarily easier than need be.</a> This bug was long-standing, fetchmail 6.3.8 validates the APOP challenge stricter.</p>
+<p><a href="http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2006-5974">CVE-2006-5974:</a> Fetchmail was found to <a href="fetchmail-SA-2006-03.txt">crash when refusing a message that was bound to be delivered by an MDA.</a> This bug was introduced into fetchmail 6.3.5 and fixed in 6.3.6.</p>
+<p><a href="http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2006-5867">CVE-2006-5867:</a> Fetchmail was found to <a href="fetchmail-SA-2006-02.txt">omit TLS or send the password in clear text despite the configuration stating otherwise.</a> This was a long-standing bug reported by Isaac Wilcox, fixed in fetchmail 6.3.6. There will be no 6.2.X releases to fix this bug in 6.2.X.</p>
+<p><a href="http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2006-0321">CVE-2006-0321:</a> Fetchmail was found to <a href="fetchmail-SA-2006-01.txt">crash after bouncing a message with bad addresses. This bug was introduced with fetchmail 6.3.0 and fixed in fetchmail 6.3.2.</a></p>
+<p><a href="http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2005-4348">CVE-2005-4348:</a> Fetchmail was found to contain <a href="fetchmail-SA-2005-03.txt">a bug (null pointer dereference) that can be exploited to a denial of service attack</a> when fetchmail runs in multidrop mode. 6.2.5.5 and 6.3.1 have this bug fixed.</p>
+<p><a href="http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2005-3088">CVE-2005-3088:</a> Fetchmailconf was found to <a href="fetchmail-SA-2005-02.txt">open the configuration files world-readable, writing data to them, and only then tightening up permissions</a>, which may cause password information to be visible to other users. This bug affected fetchmail 6.2.0, 6.2.5 and 6.2.5.2.  The bug is fixed in fetchmail 6.2.5.4 and 6.3.0.</p>
+<p><a href="http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2005-2335">CVE-2005-2335:</a> Fetchmail was found to contain a <a href="fetchmail-SA-2005-01.txt">remotely exploitable code injection vulnerability (potentially privileged code)</a> in the POP3 code, affecting both the 6.2.0 and 6.2.5 releases. 6.2.5.2, 6.2.5.4 and 6.3.0 have got this bug fixed. (Other versions have not been checked if they contain this bug.)</p>
+
+<p><strong>Please <a href="http://developer.berlios.de/project/showfiles.php?group_id=1824">update to fetchmail version 6.3.8</a> and apply the two patches from the security announcements CVE-2007-4565 and CVE-2008-2711 above.</strong></p>
+
+</div>
+
+<h1>What fetchmail does:</h1>
+
+<p>Fetchmail is a full-featured, robust, well-documented
+remote-mail retrieval and forwarding utility intended to be used over
+on-demand TCP/IP links (such as SLIP or PPP connections). It supports
+every remote-mail protocol now in use on the Internet: POP2, POP3,
+RPOP, APOP, KPOP, all flavors of <a
+href="http://www.imap.org">IMAP</a>, ETRN, and ODMR. It can even
+support IPv6 and IPSEC.</p>
+
+<p>Fetchmail retrieves mail from remote mail servers and forwards it via
+SMTP, so it can then be read by normal mail user agents such as <a
+href="http://www.mutt.org/">mutt</a>, elm(1) or BSD Mail.
+It allows all your system MTA's filtering, forwarding, and aliasing
+facilities to work just as they would on normal mail.</p>
+
+<p>Fetchmail offers better protection against password-sniffing than any
+other Unix remote-mail client.  It supports APOP, KPOP, OTP, Compuserve
+RPA, Microsoft NTLM, and IMAP RFC1731 encrypted authentication methods
+including CRAM-MD5 to avoid sending passwords en clair. It can be
+configured to support end-to-end encryption via tunneling with <a
+href="http://www.openssh.com/">ssh, the Secure Shell</a>.</p>
+
+<p>Fetchmail can be used as a POP/IMAP-to-SMTP gateway for an entire DNS
+domain, collecting mail from a single drop box on an ISP and
+SMTP-forwarding it based on header addresses. (We don't really
+recommend this, though, as it may lose important envelope-header
+information.  ETRN or a UUCP connection is better.)</p>
+
+<p>Fetchmail can be started automatically and silently as a system daemon
+at boot time.  When running in this mode with a short poll interval,
+it is pretty hard for anyone to tell that the incoming mail link is
+not a full-time "push" connection.</p>
+
+<p>Fetchmail is easy to configure.  You can edit its dotfile directly, or
+use the interactive GUI configurator (fetchmailconf) supplied with the
+fetchmail distribution.  It is also directly supported in linuxconf
+versions 1.16r8 and later.</p>
+
+<p>Fetchmail is fast and lightweight.  It packs all its standard
+features (POP3, IMAP, and ETRN support) in 196K of core on a
+Pentium under Linux.</p>
+
+<p>Fetchmail is <a href="http://www.opensource.org">open-source</a>
+and <a href="http://www.gnu.org/philosophy/free-sw.html">free
+software</a>.</p>
+
+<h1>Where to find out more about fetchmail:</h1>
+
+<p>See the <a href="fetchmail-features.html">Fetchmail Feature List</a> for more
+about what fetchmail does.</p>
+
+<p>See the on-line <a href="fetchmail-man.html">manual page</a> for
+basics.</p>
+
+<p>See the <a href="fetchmail-FAQ.html">HTML Fetchmail FAQ</a> for
+troubleshooting help.</p>
+
+<p>See the <a href="design-notes.html">Fetchmail Design Notes</a>
+for discussion of some of the design choices in fetchmail.</p>
+
+<p>See the project's <a href="todo.html">To-Do list</a> for indications
+of known problems and requested features.</p>
+
+<p>The developers use <a
+href="http://subversion.tigris.org/">Subversion</a> for revision control.
+To get the latest development version, point your subversion client at <a
+href="http://mknod.org/svn/fetchmail/trunk/">http://mknod.org/svn/fetchmail/trunk/</a>.</p>
+
+<p>See the <a
+href="http://developer.berlios.de/projects/fetchmail/">project
+page</a> for more, including <a
+href="http://developer.berlios.de/project/showfiles.php?group_id=1824">downloads</a>.
+(However, note that we no longer use the subversion repository that Berlios provides.)</p>
+
+<h1>Getting help with fetchmail:</h1>
+
+<p>
+There is a fetchmail-users list for help and other user discussion
+of fetchmail.  It's a MailMan list, which you can sign up for at <a
+href="http://lists.berlios.de/mailman/listinfo/fetchmail-users">
+fetchmail-users at lists.berlios.de</a>.  There is also a
+fetchmail-devel list for people who want to discuss fixes and
+improvements in fetchmail and help co-develop it.  That one is at <a
+href="http://lists.berlios.de/mailman/listinfo/fetchmail-devel">
+fetchmail-devel at lists.berlios.de</a>.
+Finally, there is an announcements-only list, <a
+href="http://lists.berlios.de/mailman/listinfo/fetchmail-announce">
+fetchmail-announce at lists.berlios.de</a>.</p>
+
+<p>Note: before submitting a question to the lists, <strong>please read
+the <a href="fetchmail-FAQ.html">FAQ</a></strong> (especially item <a
+href="fetchmail-FAQ.html#G3">G3</a> on how to report bugs).  We
+tend to get the same three newbie questions over and over again.  The
+FAQ covers them like a blanket.</p>
+
+<h1>Maintainer History</h1>
+<p>Fetchmail originated as a program called <i>popclient</i>, written
+by Carl Harris.  In 1996, <a href="http://www.catb.org/~esr/">Eric
+S. Raymond</a> took over; he soon renamed the program to fetchmail after
+adding IMAP support.</p>
+<p>In 2004 a new team took over, led by <a
+href="http://developer.berlios.de/users/rfunk/">Rob Funk</a>, <a
+href="http://developer.berlios.de/users/bob/">Graham Wilson</a>, and <a
+href="http://developer.berlios.de/users/m-a/">Matthias Andree</a>. Since then,
+Graham Wilson has retreated, and <a
+href="http://developer.berlios.de/users/shetye/">Sunil Shetye</a> has
+contributed several important pieces of code.</p>
+
+<h1>You can help improve fetchmail:</h1>
+
+<p>We welcome your code contributions.  But even if you don't write code,
+you can help fetchmail improve.</p>
+
+<p><strong>If you administer a site that runs a post-office server, you may be
+able help improve fetchmail by lending us a test account on your site.
+Note that we do not need a shell account for this purpose, just a 
+mailbox and a mail address.  Nor are we interested in collecting maildrops per
+se -- what we're collecting is different <em>kinds of servers</em>.</strong></p>
+
+<p>Before each release, we run a test harness that sends date-stamped 
+test mail to each site on our regression-test list, then tries to
+retrieve it.  Please take a look at the <a href="testservers.html">
+list of test servers</a>.  If you can lend us an account on a kind
+of server that is <em>not</em> already on this list, please do.</p>
+
+<h1>Where you can use fetchmail:</h1>
+
+<p>The fetchmail code was developed under Linux, but has also been
+extensively tested under 4.4BSD, SunOS, Solaris, AIX, and NEXTSTEP.  It
+should be readily portable to other Unix variants (it requires only
+POSIX plus BSD sockets, and uses GNU autoconf).</p>
+
+<p>Fetchmail is supported only for Unix by its official maintainers.
+However, it is reported to build and run correctly under BeOS,
+AmigaOS, Rhapsody, and QNX as well.  There is a CygWin port.</p>
+
+<h1>Related works</h1>
+
+<h2>Similar software</h2>
+
+<p><strong>fdm:</strong> A recently appeared software package that integrates basic filtering is <a href="http://fdm.sourceforge.net/">Nicholas Marriott's fdm</a>.
+
+<p><strong>getmail:</strong> When fetchmail's development was
+stalled before the latest team took over, <a
+href="http://pyropus.ca/software/getmail/">Charles Cazabon's getmail</a> came
+along as an intended replacement.  It still doesn't do everything that
+fetchmail does, and often suffers from Python library shortcomings, for
+instance when it comes to SSL, but it's close enough to give us a bit of
+competition.</p>
+
+<p><strong>animail:</strong> Another contender with integrated filtering is <a href="http://juanjoalvarez.net/animaileng">Juanjo ?lvarez Mart?nez's Animail</a>.</p>
+
+<h2>Complementary and extension software</h2>
+
+<p>Jochen Hayek is developing a set of
+<a href="http://www.b.shuttle.de/hayek/JHimap_utils/">
+IMAP tools in Python</a> that read your .fetchmailrc file and are
+designed to work with fetchmail.   Jochen's tools can report selected
+header lines, or move incoming messages to named mailboxes based on
+the contents of headers.</p>
+
+<!-- no longer true
+<p>Donncha O Caoihm has written a Perl script called 
+<a href="http://blogs.linux.ie/xeer/install-sendmail/">install-sendmail</a>
+that assists you in installing sendmail and fetchmail together.</p>
+-->
+
+<p>Peter Hawkins has written a script called <a
+href="http://linux.cudeso.be/linuxdoc/gotmail.php">gotmail</a> that
+can retrieve Hotmail. Another script, <a
+href="http://yosucker.sourceforge.net">yosucker</a>, can retrieve
+Yahoo webmail.</p>
+
+<p>There's a program called
+<a href="http://mailfilter.sourceforge.net/">mailfilter</a> which can be used
+to do spam filtering, that works particularly well called from fetchmail's
+<code>preconnect</code> directive.</p>
+
+<p>A hacker identifying himself simply as 'Steines' has written a
+filter which rewrites the to-line with a line which only includes
+receipients for a given domain and renames the old to-line. It also
+rewrites the domain-part of addresses if the offical domain is
+different from the local domain. You can find it <a 
+href="http://www.steines.com/mailf/">here</a>.</p>
+
+</div>
+
+<a href="http://developer.berlios.de"> 
+<img src="http://developer.berlios.de/bslogo.php?group_id=1824&amp;type=1" width="124" height="32" border="0" alt="BerliOS Logo" align="right" /></a>
+
+</body>
+</html>

Added: branches/BRANCH_6-3/website/sitestyle.css
===================================================================
--- branches/BRANCH_6-3/website/sitestyle.css	2008-06-17 12:43:03 UTC (rev 5196)
+++ branches/BRANCH_6-3/website/sitestyle.css	2008-06-17 12:43:54 UTC (rev 5197)
@@ -0,0 +1,112 @@
+/* From ESR's http://www.catb.org/~esr/sitestyle.css
+ * except: insert arial before helvetica in font lists
+ */
+/* Originally cribbed from http://bluerobot.com/web/layouts/layout1.html
+ * However, people who merge the hotlink colors are evil and should be killed, 
+ * so I removed that.  Fixing font sizes in pixels is evil, too; is much as 
+ * possible I has move all dimensions to be relative to the associated font 
+ * size. Finally, light grey is a great background color, but lousy for
+ * foreground text on white.
+ */
+
+body {
+	margin:0;
+	padding:0;
+	font-family: arial, helvetica, sans-serif;
+	color:#333;
+	background-color:white;
+	}
+p {
+	font-family: arial, helvetica, sans-serif;
+	/* margin:0 0 1em 0; */
+	padding:0;
+	}
+/* #Content>p {text-indent:2em; margin:0;} */
+/* #Content>p+p {text-indent:2em; margin-top: 1ex;} */
+
+h1 {
+	font-size: x-large;
+	margin-bottom: 0.25ex;
+	}
+h2 {
+	font-size: large;
+	margin-bottom: 0.25ex;
+	}
+
+a {
+	text-decoration:none;
+	font-family: arial, helvetica, sans-serif;
+	}
+a:hover {background-color:#ccc;}
+
+#Header {
+	font-weight:600;
+	font-size: x-large;	/* should be same as an h1 header */
+	margin:20px 0 10px 0;
+	padding:0.3ex 0 1.3ex 20px;
+	border-style:solid;
+	border-color:black;
+	border-width:1px 0;
+	background-color:#eee;
+
+/* Here is the ugly brilliant hack that protects IE5/Win from its own
+stupidity.  Thanks to Tantek Celik for the hack and to Eric Costello
+for publicizing it.  IE5/Win incorrectly parses the "\"}"" value,
+prematurely closing the style declaration. The incorrect IE5/Win value
+is above, while the correct value is below. See
+http://glish.com/css/hacks.asp for details. */
+
+	voice-family: "\"}\"";
+	voice-family:inherit;
+	height:4px;
+	}
+/* I've heard this called the "be nice to Opera 5" rule. Basically, it
+feeds correct length values to user agents that exhibit the parsing
+error exploited above yet get the CSS box model right and understand
+the CSS2 parent-child selector. ALWAYS include a "be nice to Opera 5"
+rule every time you use the Tantek Celik hack (above). */
+body>#Header {height:14px;}
+
+#Content {
+	/* Left margin is menu width + 3em
+	 */
+	margin:0 50px 50px 11em;
+	padding:10px;
+	}
+
+#Menu {
+	position:absolute;
+	top:80px;
+	left:20px;
+	width:8em;
+	padding:0.5em;
+	background-color:#eee;
+	border:1px solid #999;
+/* Again, the ugly brilliant hack. */
+	voice-family: "\"}\"";
+	voice-family:inherit;
+	width:8em;
+	}
+/* Again, "be nice to Opera 5". */
+body>#Menu {width:8em;}
+
+/* For convenience */
+.centered {
+	text-align: center;
+	margin-left: auto;
+	margin-right: auto;
+	}
+
+.notebox {
+	background-color:#eee;
+	border:1px dashed #999;
+	margin: 15px;
+	font-size:small;
+	text-indent: 0;
+}
+
+/*
+Local Variables:
+compile-command: "(cd ~/WWW; upload sitestyle.css)"
+End:
+*/

Added: branches/BRANCH_6-3/website/testservers.html
===================================================================
--- branches/BRANCH_6-3/website/testservers.html	2008-06-17 12:43:03 UTC (rev 5196)
+++ branches/BRANCH_6-3/website/testservers.html	2008-06-17 12:43:54 UTC (rev 5197)
@@ -0,0 +1,60 @@
+<?xml version="1.0" encoding="ISO-8859-1"?>
+<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
+    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
+<html xmlns="http://www.w3.org/1999/xhtml">
+<head>
+<meta name="description" content=""/>
+<meta name="keywords" content=""/> 
+<title>Fetchmail's Test List</title>
+</head>
+<body>
+<table width="100%" cellpadding=0 summary="Canned page header"><tr>
+<td width="30%">Back to <a href="/index.html">Home Page</a>
+<td width="30%" align=right>Wed Oct 15 18:43:10 EDT 2003
+</tr></table>
+<hr />
+<h1>Fetchmail's Test List</h1>
+
+<p>Here are the server types on my regression-test list:</p>
+
+<table border=1 width=80% align=center summary="Server list">
+<tr>
+<td><strong>Protocol &amp; Version:</strong></td>
+<td><strong>Special Options:</strong></td>
+</tr>
+<tr><td>IMAP: CommuniGate IMAP server</td><td>IMAPrev1 STARTTLS AUTH=CRAM-MD5 AUTH=DIGEST-MD5</td>
+<tr><td>POP3: CommuniGate POP3 server</td><td>CAPA LAST APOP CRAM-MD5</td>
+<tr><td>POP3: IntraStore POP3 mail server</td><td>!CAPA LAST</td>
+<tr><td>APOP: IntraStore POP3 mail server</td><td>!CAPA LAST APOP</td>
+<tr><td>IMAP: IntraStore IMAP mail server</td><td>IMAPrev1 IDLE AUTH=CRAM-MD5 AUTH=SKEY AUTH=ANONYMOUS</td>
+<tr><td>POP3: Eudora EIMS</td><td>CAPA LAST APOP SASL CRAM-MD5 NTLM</td>
+<tr><td>POP3: gmx.de pop server</td><td>!CAPA UIDL</td>
+<tr><td>IMAP: IMail IMAP server</td><td>IMAP4rev1 AUTH=CRAM-MD5</td>
+<tr><td>IMAP: Microsoft Exchange</td><td>IDLE AUTH=NTLM</td>
+<tr><td>POP3: qpopper 3.1.2 (Eudora) patched with mysql</td><td>CAPA UIDL</td>
+<tr><td>IMAP: Courier IMAP</td><td>IMAP4rev1</td>
+<tr><td>POP3: Courier POP3</td><td>CAPA UIDL</td>
+<tr><td>APOP: Qpopper using APOP</td><td>!CAPA</td>
+<tr><td>IMAP: UW IMAP</td><td>IMAPrev1</td>
+<tr><td>IMAP: Courier IMAP</td><td>IMAP4rev1</td>
+<tr><td>POP3: Qpopper 4.0.5</td><td>CAPA UIDL</td>
+</tr></table>
+
+<p>If you control a post-office server that is not one of the types listed
+here, please consider lending me a test account.  Note that I do <em>not</em>
+need shell access, just the permissions to send mail to a mailbox the server
+looks at and to fetch mail off of it.</p>
+
+<p>I'd like to have weird things like a POP2 server on here.  Also more
+closed-source servers because they tend to be broken in odd
+ways. These are the real robustness tests.</p>
+
+<hr />
+<table width="100%" cellpadding=0 summary="Canned page header"><tr>
+<td width="30%">Back to <a href="/index.html">Home Page</a>
+<td width="30%" align=right>Wed Oct 15 18:43:10 EDT 2003
+</tr></table>
+
+<br clear="left" />
+</BODY>
+</HTML>

Added: branches/BRANCH_6-3/website/todo.html
===================================================================
--- branches/BRANCH_6-3/website/todo.html	2008-06-17 12:43:03 UTC (rev 5196)
+++ branches/BRANCH_6-3/website/todo.html	2008-06-17 12:43:54 UTC (rev 5197)
@@ -0,0 +1 @@
+link ../todo.html
\ No newline at end of file


Property changes on: branches/BRANCH_6-3/website/todo.html
___________________________________________________________________
Name: svn:special
   + *



From svn at mknod.org  Tue Jun 17 14:59:26 2008
From: svn at mknod.org (svn at mknod.org)
Date: Tue, 17 Jun 2008 07:59:26 -0500 (CDT)
Subject: [fetchmail-svn] r5198 - branches/BRANCH_6-3/dist-tools
Message-ID: <20080617125926.403B96B010F@mknod.org>

Author: m-a
Date: 2008-06-17 07:59:26 -0500 (Tue, 17 Jun 2008)
New Revision: 5198

Added:
   branches/BRANCH_6-3/dist-tools/send-security-announce.sh
Log:
Add security announcer script.

Added: branches/BRANCH_6-3/dist-tools/send-security-announce.sh
===================================================================
--- branches/BRANCH_6-3/dist-tools/send-security-announce.sh	2008-06-17 12:43:54 UTC (rev 5197)
+++ branches/BRANCH_6-3/dist-tools/send-security-announce.sh	2008-06-17 12:59:26 UTC (rev 5198)
@@ -0,0 +1,16 @@
+test "$SEND_ANNOUNCEMENTS" = doit || { echo "read the source, luke! -> $0" ; cat "$0" ; exit 1 ; }
+
+ANN=fetchmail-SA-2008-02
+FILE=$HOME/mywork/fetchmail/BRANCH_6-3/$ANN.txt
+test -r $FILE || { echo "Cannot find $FILE." ; exit 1 ; }
+CVE=$(sed -n '/^CVE Name:/ { s/^.*:[ 	]*//p;q; }' $FILE)
+SUBJECT="fetchmail security announcement $ANN ($CVE)"
+
+nail -r ma+nomail at dt.e-technik.uni-dortmund.de -s "$SUBJECT" <$FILE \
+    vulnwatch at vulnwatch.org
+
+nail -r ma+bt at dt.e-technik.uni-dortmund.de -s "$SUBJECT" <$FILE \
+    bugtraq at securityfocus.com
+
+nail -r matthias.andree at gmx.de -s "$SUBJECT" <$FILE \
+    vendor-sec at lst.de fetchmail-announce at lists.berlios.de


Property changes on: branches/BRANCH_6-3/dist-tools/send-security-announce.sh
___________________________________________________________________
Name: svn:executable
   + *



From svn at mknod.org  Tue Jun 17 15:02:54 2008
From: svn at mknod.org (svn at mknod.org)
Date: Tue, 17 Jun 2008 08:02:54 -0500 (CDT)
Subject: [fetchmail-svn] r5199 - branches/BRANCH_6-3
Message-ID: <20080617130254.400A46B012F@mknod.org>

Author: m-a
Date: 2008-06-17 08:02:54 -0500 (Tue, 17 Jun 2008)
New Revision: 5199

Modified:
   branches/BRANCH_6-3/fetchmail-SA-2005-01.txt
   branches/BRANCH_6-3/fetchmail-SA-2005-02.txt
   branches/BRANCH_6-3/fetchmail-SA-2005-03.txt
   branches/BRANCH_6-3/fetchmail-SA-2006-01.txt
   branches/BRANCH_6-3/fetchmail-SA-2006-02.txt
   branches/BRANCH_6-3/fetchmail-SA-2006-03.txt
   branches/BRANCH_6-3/fetchmail-SA-2007-01.txt
   branches/BRANCH_6-3/fetchmail-SA-2007-02.txt
   branches/BRANCH_6-3/fetchmail-SA-2008-01.txt
Log:
GnuPG-sign security announcements.

Modified: branches/BRANCH_6-3/fetchmail-SA-2005-01.txt
===================================================================
--- branches/BRANCH_6-3/fetchmail-SA-2005-01.txt	2008-06-17 12:59:26 UTC (rev 5198)
+++ branches/BRANCH_6-3/fetchmail-SA-2005-01.txt	2008-06-17 13:02:54 UTC (rev 5199)
@@ -1,3 +1,6 @@
+-----BEGIN PGP SIGNED MESSAGE-----
+Hash: SHA1
+
 fetchmail-SA-2005-01: security announcement
 
 Topic:		remote code injection vulnerability in fetchmail
@@ -121,3 +124,10 @@
 Use the information herein at your own risk.
 
 END OF fetchmail-SA-2005-01.txt
+-----BEGIN PGP SIGNATURE-----
+Version: GnuPG v1.4.5 (GNU/Linux)
+
+iD8DBQFIV7WWvmGDOQUufZURAqbIAKCZF7CJxDxKOQ0x254dvkx3qhMC6wCfUAlm
+9MT9GHxQYjdYZvzv9G4jOEA=
+=6AoG
+-----END PGP SIGNATURE-----

Modified: branches/BRANCH_6-3/fetchmail-SA-2005-02.txt
===================================================================
--- branches/BRANCH_6-3/fetchmail-SA-2005-02.txt	2008-06-17 12:59:26 UTC (rev 5198)
+++ branches/BRANCH_6-3/fetchmail-SA-2005-02.txt	2008-06-17 13:02:54 UTC (rev 5199)
@@ -1,3 +1,6 @@
+-----BEGIN PGP SIGNED MESSAGE-----
+Hash: SHA1
+
 fetchmail-SA-2005-02: security announcement
 
 Topic:		password exposure in fetchmailconf
@@ -94,3 +97,10 @@
 Use the information herein at your own risk.
 
 END OF fetchmail-SA-2005-02.txt
+-----BEGIN PGP SIGNATURE-----
+Version: GnuPG v1.4.5 (GNU/Linux)
+
+iD8DBQFIV7WWvmGDOQUufZURAlq/AKCx+EnXjnakBVkUjtdIh+moYOgIqACdERnd
+TR05jtCG4JEb6iHz8AVcfOc=
+=vL+b
+-----END PGP SIGNATURE-----

Modified: branches/BRANCH_6-3/fetchmail-SA-2005-03.txt
===================================================================
--- branches/BRANCH_6-3/fetchmail-SA-2005-03.txt	2008-06-17 12:59:26 UTC (rev 5198)
+++ branches/BRANCH_6-3/fetchmail-SA-2005-03.txt	2008-06-17 13:02:54 UTC (rev 5199)
@@ -1,3 +1,6 @@
+-----BEGIN PGP SIGNED MESSAGE-----
+Hash: SHA1
+
 fetchmail-SA-2005-03: security announcement
 
 Topics:		#1 crash retrieving headerless message in multidrop mode
@@ -111,3 +114,10 @@
 Use the information herein at your own risk.
 
 END OF fetchmail-SA-2005-03.txt
+-----BEGIN PGP SIGNATURE-----
+Version: GnuPG v1.4.5 (GNU/Linux)
+
+iD8DBQFIV7WXvmGDOQUufZURAjqeAJ90wOleuLWpPKGLdPyLHeDqjxXBrQCgktVz
+5rKRtG/LwqXUiqNxjHALy7k=
+=NBXT
+-----END PGP SIGNATURE-----

Modified: branches/BRANCH_6-3/fetchmail-SA-2006-01.txt
===================================================================
--- branches/BRANCH_6-3/fetchmail-SA-2006-01.txt	2008-06-17 12:59:26 UTC (rev 5198)
+++ branches/BRANCH_6-3/fetchmail-SA-2006-01.txt	2008-06-17 13:02:54 UTC (rev 5199)
@@ -1,3 +1,6 @@
+-----BEGIN PGP SIGNED MESSAGE-----
+Hash: SHA1
+
 fetchmail-SA-2006-01: crash when bouncing messages.
 
 Topics:		#1 crash when bouncing a message
@@ -101,3 +104,10 @@
 Use the information herein at your own risk.
 
 END OF fetchmail-SA-2006-01.txt
+-----BEGIN PGP SIGNATURE-----
+Version: GnuPG v1.4.5 (GNU/Linux)
+
+iD8DBQFIV7WXvmGDOQUufZURAtJBAKCjxJ3q11MxXxAWqqFYlB/z0uJMVwCeLc2O
+SHK7Gu7QlDzSv3lahIbLUTU=
+=g1dk
+-----END PGP SIGNATURE-----

Modified: branches/BRANCH_6-3/fetchmail-SA-2006-02.txt
===================================================================
--- branches/BRANCH_6-3/fetchmail-SA-2006-02.txt	2008-06-17 12:59:26 UTC (rev 5198)
+++ branches/BRANCH_6-3/fetchmail-SA-2006-02.txt	2008-06-17 13:02:54 UTC (rev 5199)
@@ -1,3 +1,6 @@
+-----BEGIN PGP SIGNED MESSAGE-----
+Hash: SHA1
+
 fetchmail-SA-2006-02: TLS enforcement problem/MITM attack/password exposure
 
 Topics:		fetchmail cannot enforce TLS
@@ -123,3 +126,10 @@
 Use the information herein at your own risk.
 
 END OF fetchmail-SA-2006-02.txt
+-----BEGIN PGP SIGNATURE-----
+Version: GnuPG v1.4.5 (GNU/Linux)
+
+iD8DBQFIV7WXvmGDOQUufZURAr4xAKDSgBfyRuCoznZM6vuyA3aDHr/o5QCgvuDX
+OKcBNAf2aVZjS9X0+w/fEc8=
+=PAe2
+-----END PGP SIGNATURE-----

Modified: branches/BRANCH_6-3/fetchmail-SA-2006-03.txt
===================================================================
--- branches/BRANCH_6-3/fetchmail-SA-2006-03.txt	2008-06-17 12:59:26 UTC (rev 5198)
+++ branches/BRANCH_6-3/fetchmail-SA-2006-03.txt	2008-06-17 13:02:54 UTC (rev 5199)
@@ -1,3 +1,6 @@
+-----BEGIN PGP SIGNED MESSAGE-----
+Hash: SHA1
+
 fetchmail-SA-2006-03: crash when refusing message delivered through MDA
 
 Topics:		fetchmail crashes when refusing a message bound for an MDA
@@ -80,3 +83,10 @@
 Use the information herein at your own risk.
 
 END OF fetchmail-SA-2006-03.txt
+-----BEGIN PGP SIGNATURE-----
+Version: GnuPG v1.4.5 (GNU/Linux)
+
+iD8DBQFIV7WXvmGDOQUufZURAsUHAKDEjsB1YI+WdghCXiwjyl4630kVpQCg66na
+pyGK3l7WWgJH/K8oM4bmcRU=
+=+oGe
+-----END PGP SIGNATURE-----

Modified: branches/BRANCH_6-3/fetchmail-SA-2007-01.txt
===================================================================
--- branches/BRANCH_6-3/fetchmail-SA-2007-01.txt	2008-06-17 12:59:26 UTC (rev 5198)
+++ branches/BRANCH_6-3/fetchmail-SA-2007-01.txt	2008-06-17 13:02:54 UTC (rev 5199)
@@ -1,3 +1,6 @@
+-----BEGIN PGP SIGNED MESSAGE-----
+Hash: SHA1
+
 fetchmail-SA-2007-01: APOP considered insecure
 
 Topics:		APOP authentication insecure, fetchmail implementation lax
@@ -92,3 +95,10 @@
 Use the information herein at your own risk.
 
 END OF fetchmail-SA-2007-01.txt
+-----BEGIN PGP SIGNATURE-----
+Version: GnuPG v1.4.5 (GNU/Linux)
+
+iD8DBQFIV7WXvmGDOQUufZURAg8MAKDewyOyTpRs6HMcNLMA0vXx4glwLQCeOov6
+r9AYJJu51+yAhjox79Tli+I=
+=pGe2
+-----END PGP SIGNATURE-----

Modified: branches/BRANCH_6-3/fetchmail-SA-2007-02.txt
===================================================================
--- branches/BRANCH_6-3/fetchmail-SA-2007-02.txt	2008-06-17 12:59:26 UTC (rev 5198)
+++ branches/BRANCH_6-3/fetchmail-SA-2007-02.txt	2008-06-17 13:02:54 UTC (rev 5199)
@@ -1,3 +1,6 @@
+-----BEGIN PGP SIGNED MESSAGE-----
+Hash: SHA1
+
 fetchmail-SA-2007-02: Crash when a local warning message is rejected
 
 Topics:		Crash when a fetchmail-generated warning message is rejected
@@ -105,16 +108,23 @@
 
 Index: sink.c
 ===================================================================
---- sink.c	(revision 5118)
+- --- sink.c	(revision 5118)
 +++ sink.c	(revision 5119)
 @@ -262,7 +262,7 @@
      const char *md1 = "MAILER-DAEMON", *md2 = "MAILER-DAEMON@";
  
      /* don't bounce in reply to undeliverable bounces */
--    if (!msg->return_path[0] ||
+- -    if (!msg->return_path[0] ||
 +    if (!msg || !msg->return_path[0] ||
  	strcmp(msg->return_path, "<>") == 0 ||
  	strcasecmp(msg->return_path, md1) == 0 ||
  	strncasecmp(msg->return_path, md2, strlen(md2)) == 0)
 
 END OF fetchmail-SA-2007-02.txt
+-----BEGIN PGP SIGNATURE-----
+Version: GnuPG v1.4.5 (GNU/Linux)
+
+iD8DBQFIV7WXvmGDOQUufZURAr8+AKC7GpAFvCTaHD69n+g39lWtPIheCwCglj/O
+yh3P8bOmEn3a54h4aH2BFLA=
+=NBQZ
+-----END PGP SIGNATURE-----

Modified: branches/BRANCH_6-3/fetchmail-SA-2008-01.txt
===================================================================
--- branches/BRANCH_6-3/fetchmail-SA-2008-01.txt	2008-06-17 12:59:26 UTC (rev 5198)
+++ branches/BRANCH_6-3/fetchmail-SA-2008-01.txt	2008-06-17 13:02:54 UTC (rev 5199)
@@ -1,3 +1,6 @@
+-----BEGIN PGP SIGNED MESSAGE-----
+Hash: SHA1
+
 fetchmail-SA-2008-01: Crash on large log messages in verbose mode
 
 Topics:		Crash in large log messages in verbose mode.
@@ -118,13 +121,13 @@
 
 diff --git a/report.c b/report.c
 index 31d4e48..2a731ac 100644
---- a/report.c
+- --- a/report.c
 +++ b/report.c
 @@ -238,11 +238,17 @@ report_build (FILE *errfp, message, va_alist)
      rep_ensuresize();
  
  #if defined(VA_START)
--    VA_START (args, message);
+- -    VA_START (args, message);
      for ( ; ; )
      {
 +	/*
@@ -143,9 +146,16 @@
  	partial_message_size += 2048;
  	partial_message = REALLOC (partial_message, partial_message_size);
      }
--    va_end (args);
+- -    va_end (args);
  #else
      for ( ; ; )
      {
 
 END OF fetchmail-SA-2008-01.txt
+-----BEGIN PGP SIGNATURE-----
+Version: GnuPG v1.4.5 (GNU/Linux)
+
+iD8DBQFIV7WYvmGDOQUufZURAs7/AJ49LCd2q34puZHNe4GxcXnsOtB8DQCg7mth
+BUgZUxZxPInU60c9rNFbOm8=
+=yg6v
+-----END PGP SIGNATURE-----



From svn at mknod.org  Tue Jun 17 15:05:22 2008
From: svn at mknod.org (svn at mknod.org)
Date: Tue, 17 Jun 2008 08:05:22 -0500 (CDT)
Subject: [fetchmail-svn] r5200 - branches/BRANCH_6-3
Message-ID: <20080617130522.15DBE6B012F@mknod.org>

Author: m-a
Date: 2008-06-17 08:05:21 -0500 (Tue, 17 Jun 2008)
New Revision: 5200

Modified:
   branches/BRANCH_6-3/NEWS
Log:
Record BerliOS patch ID for CVE-2008-2711.

Modified: branches/BRANCH_6-3/NEWS
===================================================================
--- branches/BRANCH_6-3/NEWS	2008-06-17 13:02:54 UTC (rev 5199)
+++ branches/BRANCH_6-3/NEWS	2008-06-17 13:05:21 UTC (rev 5200)
@@ -59,8 +59,8 @@
   bytes, it will crash, because it hands an uninitialized argument
   pointer (not the format string though) to vsnprintf and reads a
   random memory location (it calls va_arg() too often without
-  resetting it with va_start()). Based on a patch by Petr Uzel, fixes
-  Novell Bug #354291.
+  resetting it with va_start()). Based on a patch (BerliOS patch #2492)
+  by Petr Uzel, fixes Novell Bug #354291.
   See also fetchmail-SA-2008-01.txt.
 
 # CRITICAL BUG FIX:



From svn at mknod.org  Tue Jun 17 15:10:59 2008
From: svn at mknod.org (svn at mknod.org)
Date: Tue, 17 Jun 2008 08:10:59 -0500 (CDT)
Subject: [fetchmail-svn] r5201 - branches/BRANCH_6-3
Message-ID: <20080617131059.DB4406B012F@mknod.org>

Author: m-a
Date: 2008-06-17 08:10:59 -0500 (Tue, 17 Jun 2008)
New Revision: 5201

Modified:
   branches/BRANCH_6-3/fetchmail-SA-2008-01.txt
Log:
fix typo.

Modified: branches/BRANCH_6-3/fetchmail-SA-2008-01.txt
===================================================================
--- branches/BRANCH_6-3/fetchmail-SA-2008-01.txt	2008-06-17 13:05:21 UTC (rev 5200)
+++ branches/BRANCH_6-3/fetchmail-SA-2008-01.txt	2008-06-17 13:10:59 UTC (rev 5201)
@@ -6,9 +6,9 @@
 Topics:		Crash in large log messages in verbose mode.
 
 Author:		Matthias Andree
-Version:	1.0
+Version:	1.1
 Announced:	2008-06-17
-Type:		Dereferencing garbage pointer trigged by outside circumstances
+Type:		Dereferencing garbage pointer triggered by outside circumstances
 Impact:		denial of service possible
 Danger:		low
 CVSS V2 vector: (AV:N/AC:M/Au:N/C:N/I:N/A:C/E:P/RL:O/RC:C)
@@ -35,6 +35,7 @@
 2008-06-13 1.0	first draft for MITRE/CVE (visible in SVN,
 		posted to oss-security)
 2008-06-17 1.0	published on http://www.fetchmail.info/
+2008-06-17 1.1	Corrected typo in Type: above (trigged -> triggered)
 
 
 1. Background
@@ -125,21 +126,21 @@
 +++ b/report.c
 @@ -238,11 +238,17 @@ report_build (FILE *errfp, message, va_alist)
      rep_ensuresize();
- 
+
  #if defined(VA_START)
 - -    VA_START (args, message);
      for ( ; ; )
      {
 +	/*
-+	 * args has to be initialized before every call of vsnprintf(), 
-+	 * because vsnprintf() invokes va_arg macro and thus args is 
++	 * args has to be initialized before every call of vsnprintf(),
++	 * because vsnprintf() invokes va_arg macro and thus args is
 +	 * undefined after the call.
 +	 */
 +	VA_START(args, message);
  	n = vsnprintf (partial_message + partial_message_size_used, partial_message_size - partial_message_size_used,
  		       message, args);
 +	va_end (args);
- 
+
  	if (n >= 0
  	    && (unsigned)n < partial_message_size - partial_message_size_used)
 @@ -254,7 +260,6 @@ report_build (FILE *errfp, message, va_alist)
@@ -155,7 +156,7 @@
 -----BEGIN PGP SIGNATURE-----
 Version: GnuPG v1.4.5 (GNU/Linux)
 
-iD8DBQFIV7WYvmGDOQUufZURAs7/AJ49LCd2q34puZHNe4GxcXnsOtB8DQCg7mth
-BUgZUxZxPInU60c9rNFbOm8=
-=yg6v
+iD8DBQFIV7e+vmGDOQUufZURAiAUAKCG1pBXEdVJPUr4WeIZXAr01jshkwCgvfb8
+6qqG2gZonX24W58gBEQ7Pjw=
+=vwYl
 -----END PGP SIGNATURE-----



From svn at mknod.org  Tue Jun 24 11:30:00 2008
From: svn at mknod.org (svn at mknod.org)
Date: Tue, 24 Jun 2008 04:30:00 -0500 (CDT)
Subject: [fetchmail-svn] r5202 - branches/BRANCH_6-3
Message-ID: <20080624093000.AAAD26B00FE@mknod.org>

Author: m-a
Date: 2008-06-24 04:30:00 -0500 (Tue, 24 Jun 2008)
New Revision: 5202

Modified:
   branches/BRANCH_6-3/NEWS
Log:
Mention fetchmail-SA-2008-01.txt in DOCUMENTATION section of 6.3.9 again.

Modified: branches/BRANCH_6-3/NEWS
===================================================================
--- branches/BRANCH_6-3/NEWS	2008-06-17 13:10:59 UTC (rev 5201)
+++ branches/BRANCH_6-3/NEWS	2008-06-24 09:30:00 UTC (rev 5202)
@@ -117,7 +117,7 @@
   specifies which CommonName fetchmail expects and logs. (Daniel Richard G.)
 
 # DOCUMENTATION:
-* Add fetchmail-SA-2007-02.txt
+* Add fetchmail-SA-2007-02.txt and fetchmail-SA-2008-01.txt.
 * Re-add two lines to the manual page that had accidentally become comments 
   to nroff. One was part of the --sslproto documentation, and one in the 
   "Awakening the background daemon" section.



From svn at mknod.org  Tue Jun 24 11:39:13 2008
From: svn at mknod.org (svn at mknod.org)
Date: Tue, 24 Jun 2008 04:39:13 -0500 (CDT)
Subject: [fetchmail-svn] r5203 - tags
Message-ID: <20080624093913.018F36B00FE@mknod.org>

Author: m-a
Date: 2008-06-24 04:39:12 -0500 (Tue, 24 Jun 2008)
New Revision: 5203

Added:
   tags/SNAPSHOT_6-3-9-rc1/
Log:
Tagging 6.3.9-rc1.

Copied: tags/SNAPSHOT_6-3-9-rc1 (from rev 5202, branches/BRANCH_6-3)



From svn at mknod.org  Tue Jun 24 11:44:57 2008
From: svn at mknod.org (svn at mknod.org)
Date: Tue, 24 Jun 2008 04:44:57 -0500 (CDT)
Subject: [fetchmail-svn] r5204 - branches/BRANCH_6-3
Message-ID: <20080624094457.671766B00FE@mknod.org>

Author: m-a
Date: 2008-06-24 04:44:57 -0500 (Tue, 24 Jun 2008)
New Revision: 5204

Modified:
   branches/BRANCH_6-3/NEWS
Log:
Merge security/critical sections, fix grammar.

Modified: branches/BRANCH_6-3/NEWS
===================================================================
--- branches/BRANCH_6-3/NEWS	2008-06-24 09:39:12 UTC (rev 5203)
+++ branches/BRANCH_6-3/NEWS	2008-06-24 09:44:57 UTC (rev 5204)
@@ -44,7 +44,7 @@
 
 fetchmail 6.3.9 (not yet released):
 
-# SECURITY FIX:
+# SECURITY AND CRITICAL BUG FIXES:
 * CVE-2007-4565: Denial of service: When fetchmail tries to inject a warning
   message it created itself, and the message is refused by the SMTP listener,
   fetchmail dereferences a NULL pointer and crashes. Report & fix by Earl Chew.
@@ -62,8 +62,6 @@
   resetting it with va_start()). Based on a patch (BerliOS patch #2492)
   by Petr Uzel, fixes Novell Bug #354291.
   See also fetchmail-SA-2008-01.txt.
-
-# CRITICAL BUG FIX:
 * When expunging, mark the right messages as seen to avoid message loss in "keep
   flush" configurations.  Workaround for previous versions: "expunge 0".
   Report and patch by Alexander Cherepanov - thanks a lot, Berlios Bug #11797,



From svn at mknod.org  Tue Jun 24 15:06:52 2008
From: svn at mknod.org (svn at mknod.org)
Date: Tue, 24 Jun 2008 08:06:52 -0500 (CDT)
Subject: [fetchmail-svn] r5205 - branches/BRANCH_6-3
Message-ID: <20080624130652.D570B6B0122@mknod.org>

Author: m-a
Date: 2008-06-24 08:06:51 -0500 (Tue, 24 Jun 2008)
New Revision: 5205

Modified:
   branches/BRANCH_6-3/NEWS
   branches/BRANCH_6-3/configure.ac
   branches/BRANCH_6-3/fetchmail-SA-2008-01.txt
   branches/BRANCH_6-3/report.c
Log:
Fix one more CVE-2008-2711 va_start() messup. Found by Petr Uzel.
Bump release to -rc2.

Modified: branches/BRANCH_6-3/NEWS
===================================================================
--- branches/BRANCH_6-3/NEWS	2008-06-24 09:44:57 UTC (rev 5204)
+++ branches/BRANCH_6-3/NEWS	2008-06-24 13:06:51 UTC (rev 5205)
@@ -61,6 +61,8 @@
   random memory location (it calls va_arg() too often without
   resetting it with va_start()). Based on a patch (BerliOS patch #2492)
   by Petr Uzel, fixes Novell Bug #354291.
+  Note 6.3.9-rc1 did not completely fix this issue, so it was redrawn a few 
+  hours after its release.
   See also fetchmail-SA-2008-01.txt.
 * When expunging, mark the right messages as seen to avoid message loss in "keep
   flush" configurations.  Workaround for previous versions: "expunge 0".

Modified: branches/BRANCH_6-3/configure.ac
===================================================================
--- branches/BRANCH_6-3/configure.ac	2008-06-24 09:44:57 UTC (rev 5204)
+++ branches/BRANCH_6-3/configure.ac	2008-06-24 13:06:51 UTC (rev 5205)
@@ -8,7 +8,7 @@
 dnl Process this file with autoconf to produce a configure script.
 dnl
 
-AC_INIT([fetchmail],[6.3.9-rc1],[fetchmail-users at lists.berlios.de])
+AC_INIT([fetchmail],[6.3.9-rc2],[fetchmail-users at lists.berlios.de])
 AC_CONFIG_SRCDIR([fetchmail.h])
 AC_CONFIG_HEADERS([config.h])
 AC_CONFIG_LIBOBJ_DIR([.])
@@ -61,6 +61,9 @@
 	sys/itimer.h fcntl.h sys/fcntl.h memory.h sys/wait.h \
 	arpa/inet.h arpa/nameser.h netinet/in.h net/socket.h netdb.h \
 	sys/select.h sys/socket.h sys/time.h langinfo.h])
+if test _$ac_cv_header_stdarg_h != _yes ; then
+AC_MSG_WARN([stdarg.h is not defined. Unsupported configuration, proceed at your own risk.])
+fi
 AC_CHECK_TYPE(u_int32_t,,
 	AC_DEFINE(u_int32_t,unsigned int,
 		[Define to unsigned int if <sys/types.h> does not define.]),

Modified: branches/BRANCH_6-3/fetchmail-SA-2008-01.txt
===================================================================
--- branches/BRANCH_6-3/fetchmail-SA-2008-01.txt	2008-06-24 09:44:57 UTC (rev 5204)
+++ branches/BRANCH_6-3/fetchmail-SA-2008-01.txt	2008-06-24 13:06:51 UTC (rev 5205)
@@ -6,7 +6,7 @@
 Topics:		Crash in large log messages in verbose mode.
 
 Author:		Matthias Andree
-Version:	1.1
+Version:	1.2
 Announced:	2008-06-17
 Type:		Dereferencing garbage pointer triggered by outside circumstances
 Impact:		denial of service possible
@@ -18,12 +18,14 @@
 URL:		http://www.fetchmail.info/fetchmail-SA-2008-01.txt
 Project URL:	http://www.fetchmail.info/
 
-Affects:	fetchmail release < 6.3.9 exclusively
+Affects:	fetchmail release before and excluding 6.3.9
+		fetchmail release candidate 6.3.9-rc1
 
 Not affected:	fetchmail release 6.3.9 and newer
-		systems without varargs (stdargs.h) support.
+		fetchmail release candidate 6.3.9-rc2 and newer
+		systems without varargs support.
 
-Corrected:	2008-06-13 fetchmail SVN (rev 5193)
+Corrected:	2008-06-24 fetchmail SVN (rev 5205)
 
 References:	<https://bugzilla.novell.com/show_bug.cgi?id=354291>
 		<http://developer.berlios.de/patch/?func=detailpatch&patch_id=2492&group_id=1824>
@@ -36,6 +38,7 @@
 		posted to oss-security)
 2008-06-17 1.0	published on http://www.fetchmail.info/
 2008-06-17 1.1	Corrected typo in Type: above (trigged -> triggered)
+2008-06-24 1.2  also fixed issue in report_complete (reported by Petr Uzel)
 
 
 1. Background
@@ -116,31 +119,38 @@
 Use the information herein at your own risk.
 
 
-
 B. Patch to remedy the problem
 ==============================
 
+Note that when taking this from a GnuPG clearsigned file, the lines 
+starting with a "-" character are prefixed by another "- " (dash + 
+blank) combination. Either feed this file through GnuPG to strip them, 
+or strip them manually.
+
+Whitespace differences can usually be ignored by invoking "patch -l",
+so try this if the patch does not apply.
+
 diff --git a/report.c b/report.c
-index 31d4e48..2a731ac 100644
+index 31d4e48..320e60b 100644
 - --- a/report.c
 +++ b/report.c
 @@ -238,11 +238,17 @@ report_build (FILE *errfp, message, va_alist)
      rep_ensuresize();
-
+ 
  #if defined(VA_START)
 - -    VA_START (args, message);
      for ( ; ; )
      {
 +	/*
-+	 * args has to be initialized before every call of vsnprintf(),
-+	 * because vsnprintf() invokes va_arg macro and thus args is
++	 * args has to be initialized before every call of vsnprintf(), 
++	 * because vsnprintf() invokes va_arg macro and thus args is 
 +	 * undefined after the call.
 +	 */
 +	VA_START(args, message);
  	n = vsnprintf (partial_message + partial_message_size_used, partial_message_size - partial_message_size_used,
  		       message, args);
 +	va_end (args);
-
+ 
  	if (n >= 0
  	    && (unsigned)n < partial_message_size - partial_message_size_used)
 @@ -254,7 +260,6 @@ report_build (FILE *errfp, message, va_alist)
@@ -151,12 +161,35 @@
  #else
      for ( ; ; )
      {
+@@ -304,12 +309,13 @@ report_complete (FILE *errfp, message, va_alist)
+     rep_ensuresize();
+ 
+ #if defined(VA_START)
+- -    VA_START (args, message);
+     for ( ; ; )
+     {
++	VA_START(args, message);
+ 	n = vsnprintf (partial_message + partial_message_size_used,
+ 		       partial_message_size - partial_message_size_used,
+ 		       message, args);
++	va_end(args);
+ 
+ 	/* old glibc versions return -1 for truncation */
+ 	if (n >= 0
+@@ -322,7 +328,6 @@ report_complete (FILE *errfp, message, va_alist)
+ 	partial_message_size += 2048;
+ 	partial_message = REALLOC (partial_message, partial_message_size);
+     }
+- -    va_end (args);
+ #else
+     for ( ; ; )
+     {
 
 END OF fetchmail-SA-2008-01.txt
 -----BEGIN PGP SIGNATURE-----
 Version: GnuPG v1.4.5 (GNU/Linux)
 
-iD8DBQFIV7e+vmGDOQUufZURAiAUAKCG1pBXEdVJPUr4WeIZXAr01jshkwCgvfb8
-6qqG2gZonX24W58gBEQ7Pjw=
-=vwYl
+iD8DBQFIYPBuvmGDOQUufZURAuj8AJ9IbN/UMcML6NLKSI0keQzGVGzZSQCg+UCP
+tUVNigLK8Xz40J2Eg7PD8Xs=
+=HAmn
 -----END PGP SIGNATURE-----

Modified: branches/BRANCH_6-3/report.c
===================================================================
--- branches/BRANCH_6-3/report.c	2008-06-24 09:44:57 UTC (rev 5204)
+++ branches/BRANCH_6-3/report.c	2008-06-24 13:06:51 UTC (rev 5205)
@@ -309,12 +309,13 @@
     rep_ensuresize();
 
 #if defined(VA_START)
-    VA_START (args, message);
     for ( ; ; )
     {
+	VA_START(args, message);
 	n = vsnprintf (partial_message + partial_message_size_used,
 		       partial_message_size - partial_message_size_used,
 		       message, args);
+	va_end(args);
 
 	/* old glibc versions return -1 for truncation */
 	if (n >= 0
@@ -327,7 +328,6 @@
 	partial_message_size += 2048;
 	partial_message = REALLOC (partial_message, partial_message_size);
     }
-    va_end (args);
 #else
     for ( ; ; )
     {



From svn at mknod.org  Tue Jun 24 15:23:05 2008
From: svn at mknod.org (svn at mknod.org)
Date: Tue, 24 Jun 2008 08:23:05 -0500 (CDT)
Subject: [fetchmail-svn] r5207 - tags
Message-ID: <20080624132305.78C166B0122@mknod.org>

Author: m-a
Date: 2008-06-24 08:23:05 -0500 (Tue, 24 Jun 2008)
New Revision: 5207

Added:
   tags/SNAPSHOT_6-3-9-rc2/
Log:
Tagging 6.3.9-rc2.

Copied: tags/SNAPSHOT_6-3-9-rc2 (from rev 5206, branches/BRANCH_6-3)



From svn at mknod.org  Tue Jun 24 15:31:10 2008
From: svn at mknod.org (svn at mknod.org)
Date: Tue, 24 Jun 2008 08:31:10 -0500 (CDT)
Subject: [fetchmail-svn] r5209 - branches/BRANCH_6-3/website
Message-ID: <20080624133110.6750B6B017D@mknod.org>

Author: m-a
Date: 2008-06-24 08:31:10 -0500 (Tue, 24 Jun 2008)
New Revision: 5209

Modified:
   branches/BRANCH_6-3/website/index.html
Log:
Update timestamp.

Modified: branches/BRANCH_6-3/website/index.html
===================================================================
--- branches/BRANCH_6-3/website/index.html	2008-06-24 13:30:35 UTC (rev 5208)
+++ branches/BRANCH_6-3/website/index.html	2008-06-24 13:31:10 UTC (rev 5209)
@@ -14,7 +14,7 @@
 <table width="100%" cellpadding="0" summary="Canned page header">
 <tr>
 <td>Fetchmail</td>
-<td align="right"><!-- update date -->2008-06-17</td>
+<td align="right"><!-- update date -->2008-06-24</td>
 </tr>
 </table>
 </div>



From svn at mknod.org  Tue Jun 24 15:30:35 2008
From: svn at mknod.org (svn at mknod.org)
Date: Tue, 24 Jun 2008 08:30:35 -0500 (CDT)
Subject: [fetchmail-svn] r5208 - branches/BRANCH_6-3/website
Message-ID: <20080624133035.42F1B6B0122@mknod.org>

Author: m-a
Date: 2008-06-24 08:30:35 -0500 (Tue, 24 Jun 2008)
New Revision: 5208

Modified:
   branches/BRANCH_6-3/website/index.html
Log:
Mark CVE-2008-2711/fetchmail-SA-2008-01 revised 2008-06-24.

Modified: branches/BRANCH_6-3/website/index.html
===================================================================
--- branches/BRANCH_6-3/website/index.html	2008-06-24 13:23:05 UTC (rev 5207)
+++ branches/BRANCH_6-3/website/index.html	2008-06-24 13:30:35 UTC (rev 5208)
@@ -46,11 +46,15 @@
 
 <div style="background-color:#80ff80;color:#000000;">
 <h1>ADDITIONAL FIXES FOR FETCHMAIL 6.3.8 RELEASE</h1>
-<p>New 2008-06-17: After the fetchmail-6.3.8 release described below,
-two denial-of-service vulnerabilities (<a href="#cve-2007-4565">CVE-2007-4565</a>) were discovered, but a new
-release is not yet available. Patches are parts of the security announcements:</p>
+<p>New 2008-06-24 After the fetchmail-6.3.8 release described below,
+two denial-of-service vulnerabilities were discovered, but a new release
+is not yet available. Release candidates may be found at <a
+    href="http://home.pages.de/~mandree/fetchmail/">http://home.pages.de/~mandree/fetchmail/</a>.
+Official patches for 6.3.8 are parts of the security
+announcements (you may need to use patch -l to apply them, this should
+tell patch to ignore whitespace differences):</p>
 <ul>
-    <li><a href="#cve-2008-2711">CVE-2008-2711:</a> <a
+    <li><strong>(REVISED)</strong> <a href="#cve-2008-2711">CVE-2008-2711:</a> <a
 	href="fetchmail-SA-2008-01.txt">fetchmail-SA-2008-01.txt</a></li>
     <li><a href="#cve-2007-4565">CVE-2007-4565:</a> <a
 	href="fetchmail-SA-2007-02.txt">fetchmail-SA-2007-02.txt</a></li>



From svn at mknod.org  Sun Jun 29 00:52:08 2008
From: svn at mknod.org (svn at mknod.org)
Date: Sat, 28 Jun 2008 17:52:08 -0500 (CDT)
Subject: [fetchmail-svn] r5210 - in branches/BRANCH_6-3: . contrib
Message-ID: <20080628225208.13EA86B0122@mknod.org>

Author: m-a
Date: 2008-06-28 17:52:07 -0500 (Sat, 28 Jun 2008)
New Revision: 5210

Modified:
   branches/BRANCH_6-3/NEWS
   branches/BRANCH_6-3/contrib/delete-later
Log:
Change CRLF to LF in contrib/delete-later. Reported by Petr Uzel.

Modified: branches/BRANCH_6-3/NEWS
===================================================================
--- branches/BRANCH_6-3/NEWS	2008-06-24 13:31:10 UTC (rev 5209)
+++ branches/BRANCH_6-3/NEWS	2008-06-28 22:52:07 UTC (rev 5210)
@@ -115,6 +115,7 @@
 * Add sslcommonname option (rcfile and commandline) as a way to work around
   misconfigured upstream SSL servers that use the wrong certificate name. It
   specifies which CommonName fetchmail expects and logs. (Daniel Richard G.)
+* Changed CRLF to LF line endings in contrib/delete-later (reporter: Petr Uzel)
 
 # DOCUMENTATION:
 * Add fetchmail-SA-2007-02.txt and fetchmail-SA-2008-01.txt.

Modified: branches/BRANCH_6-3/contrib/delete-later
===================================================================
--- branches/BRANCH_6-3/contrib/delete-later	2008-06-24 13:31:10 UTC (rev 5209)
+++ branches/BRANCH_6-3/contrib/delete-later	2008-06-28 22:52:07 UTC (rev 5210)
@@ -1,56 +1,56 @@
-#!/usr/bin/expect -f
-
-# MySQL database connection settings
-set CRDB_host     localhost
-set CRDB_DB       test
-set CRDB_username root
-set CRDB_password root
-
-# set eiter one to 1 for verbose output
-log_user 0
-set comments 0
-
-package require mysqltcl
-
-# connect to MySQL database
-set handle [::mysql::connect -host $CRDB_host -user $CRDB_username -password $CRDB_password]
-
-# get server/usernames to clean up
-set userlist [::mysql::sel $handle "SELECT UserID, server, username, password, retaindays from $CRDB_DB.fetchmail_user" -flatlist]
-
-# loop through all users in database
-foreach {userid server username password days} $userlist {
-  if {$comments==1} { send_user "\r\nWorking on accound #$userid\r\n*******************************\r\n" }
-  eval spawn telnet -l fetchmail_cleanup $server 110
-  expect "ready"
-  send "USER $username\r"
-  expect "password"
-  send "PASS $password\r"
-  expect "OK"
-  send "STAT\r"
-  expect "+OK "
-  expect -re "\[0-9]* "
-  set anz $expect_out(0,string)
-  if {$comments==1} { send_user "message count: $anz \r\n" }
-  set i 0
-  while { $i < $anz } {
-    incr i
-    send "UIDL $i\r"
-    expect -re "\\\+OK $i \(.*\)\r"
-    set uid $expect_out(1,string)
-    ::mysql::exec $handle "insert ignore into $CRDB_DB.fetchmail values ($userid,'$uid',now());"
-    set age [::mysql::sel $handle "SELECT DATEDIFF(now(),Fetchdate) from $CRDB_DB.fetchmail where UserID=$userid and UID='$uid'" -list]
-    if {$comments==1} { send_user "Message #$i: UID: $uid , age: $age \r\n" }
-    if {$age > $days} {
-      send "DELE $i\r"
-      expect "deleted"
-      if {$comments==1} { send_user "Message $i deleted.\r\n" }
-    }
-  }
-  send "quit\r"
-  expect "signing off"
-  ::mysql::exec $handle "delete from $CRDB_DB.fetchmail where DATEDIFF(now(),Fetchdate)>($days*2) and UserID=$userid;"
-}
-::mysql::close $handle
-exit
-
+#!/usr/bin/expect -f
+
+# MySQL database connection settings
+set CRDB_host     localhost
+set CRDB_DB       test
+set CRDB_username root
+set CRDB_password root
+
+# set eiter one to 1 for verbose output
+log_user 0
+set comments 0
+
+package require mysqltcl
+
+# connect to MySQL database
+set handle [::mysql::connect -host $CRDB_host -user $CRDB_username -password $CRDB_password]
+
+# get server/usernames to clean up
+set userlist [::mysql::sel $handle "SELECT UserID, server, username, password, retaindays from $CRDB_DB.fetchmail_user" -flatlist]
+
+# loop through all users in database
+foreach {userid server username password days} $userlist {
+  if {$comments==1} { send_user "\r\nWorking on accound #$userid\r\n*******************************\r\n" }
+  eval spawn telnet -l fetchmail_cleanup $server 110
+  expect "ready"
+  send "USER $username\r"
+  expect "password"
+  send "PASS $password\r"
+  expect "OK"
+  send "STAT\r"
+  expect "+OK "
+  expect -re "\[0-9]* "
+  set anz $expect_out(0,string)
+  if {$comments==1} { send_user "message count: $anz \r\n" }
+  set i 0
+  while { $i < $anz } {
+    incr i
+    send "UIDL $i\r"
+    expect -re "\\\+OK $i \(.*\)\r"
+    set uid $expect_out(1,string)
+    ::mysql::exec $handle "insert ignore into $CRDB_DB.fetchmail values ($userid,'$uid',now());"
+    set age [::mysql::sel $handle "SELECT DATEDIFF(now(),Fetchdate) from $CRDB_DB.fetchmail where UserID=$userid and UID='$uid'" -list]
+    if {$comments==1} { send_user "Message #$i: UID: $uid , age: $age \r\n" }
+    if {$age > $days} {
+      send "DELE $i\r"
+      expect "deleted"
+      if {$comments==1} { send_user "Message $i deleted.\r\n" }
+    }
+  }
+  send "quit\r"
+  expect "signing off"
+  ::mysql::exec $handle "delete from $CRDB_DB.fetchmail where DATEDIFF(now(),Fetchdate)>($days*2) and UserID=$userid;"
+}
+::mysql::close $handle
+exit
+



From svn at mknod.org  Mon Jun 30 15:46:12 2008
From: svn at mknod.org (svn at mknod.org)
Date: Mon, 30 Jun 2008 08:46:12 -0500 (CDT)
Subject: [fetchmail-svn] r5211 - in branches/BRANCH_6-3: . po
Message-ID: <20080630134612.562056B0122@mknod.org>

Author: m-a
Date: 2008-06-30 08:46:09 -0500 (Mon, 30 Jun 2008)
New Revision: 5211

Modified:
   branches/BRANCH_6-3/NEWS
   branches/BRANCH_6-3/TODO.txt
   branches/BRANCH_6-3/fetchmail.man
   branches/BRANCH_6-3/po/ca.po
   branches/BRANCH_6-3/po/cs.po
   branches/BRANCH_6-3/po/da.po
   branches/BRANCH_6-3/po/de.po
   branches/BRANCH_6-3/po/el.po
   branches/BRANCH_6-3/po/en_GB.po
   branches/BRANCH_6-3/po/es.po
   branches/BRANCH_6-3/po/fr.po
   branches/BRANCH_6-3/po/gl.po
   branches/BRANCH_6-3/po/ja.po
   branches/BRANCH_6-3/po/pl.po
   branches/BRANCH_6-3/po/pt_BR.po
   branches/BRANCH_6-3/po/ru.po
   branches/BRANCH_6-3/po/sk.po
   branches/BRANCH_6-3/po/sq.po
   branches/BRANCH_6-3/po/tr.po
   branches/BRANCH_6-3/po/vi.po
   branches/BRANCH_6-3/rcfile_y.y
Log:
Documentation and program output now /consistently/ claim that the
rcfile must not have more than 0700 (u=rwx,g=,o=) permissions, but
fetchmail will still silently accept additional g=x permissions for
compatibility with previous 6.2.X and 6.3.X versions.
Inconsistency (program 0710, manpage 0600) reported by Petr Uzel.


Modified: branches/BRANCH_6-3/NEWS
===================================================================
--- branches/BRANCH_6-3/NEWS	2008-06-28 22:52:07 UTC (rev 5210)
+++ branches/BRANCH_6-3/NEWS	2008-06-30 13:46:09 UTC (rev 5211)
@@ -137,6 +137,11 @@
   fetchmail is run.
 * The FAQ now recommends (#I9) not to use Google Mail for their disregard to the
   protocols they claim to support.
+* Documentation and program output now /consistently/ claim that the rcfile must
+  not have more than 0700 (u=rwx,g=,o=) permissions, but fetchmail will still
+  silently accept additional g=x permissions for compatibility with previous
+  6.2.X and 6.3.X versions.
+  Inconsistency (program 0710, manpage 0600) reported by Petr Uzel.
 
 # TRANSLATION UPDATES:
 * Polish (Jakub Bogusz)

Modified: branches/BRANCH_6-3/TODO.txt
===================================================================
--- branches/BRANCH_6-3/TODO.txt	2008-06-28 22:52:07 UTC (rev 5210)
+++ branches/BRANCH_6-3/TODO.txt	2008-06-30 13:46:09 UTC (rev 5211)
@@ -54,6 +54,8 @@
   <simpkins at cisco.com> around Nov 2nd)?
 
 6.4:
+- revisit maximum allowed rcfile permissions, fix inconsistency
+  (silently allowing g+x).
 - make UID code more efficient, parsing is O(n^2), should be no worse
   than O(n log n).
 - help systematic debugging

Modified: branches/BRANCH_6-3/fetchmail.man
===================================================================
--- branches/BRANCH_6-3/fetchmail.man	2008-06-28 22:52:07 UTC (rev 5210)
+++ branches/BRANCH_6-3/fetchmail.man	2008-06-30 13:46:09 UTC (rev 5211)
@@ -794,7 +794,7 @@
 run control file.  The pathname argument must be either "-" (a single
 dash, meaning to read the configuration from standard input) or a
 filename.  Unless the \-\-version option is also on, a named file
-argument must have permissions no more open than 0600 (u=rw,g=,o=) or
+argument must have permissions no more open than 0700 (u=rwx,g=,o=) or
 else be /dev/null.
 .TP
 .B \-i <pathname> | \-\-idfile <pathname>
@@ -1467,7 +1467,7 @@
 arguments in this file, the command-line arguments take precedence.
 .PP
 To protect the security of your passwords,
-your \fI~/.fetchmailrc\fR may not normally have more than 0600 (u=rw,g=,o=) permissions;
+your \fI~/.fetchmailrc\fR may not normally have more than 0700 (u=rwx,g=,o=) permissions;
 .I fetchmail
 will complain and exit otherwise (this check is suppressed when
 \-\-version is on).

Modified: branches/BRANCH_6-3/po/ca.po
===================================================================
--- branches/BRANCH_6-3/po/ca.po	2008-06-28 22:52:07 UTC (rev 5210)
+++ branches/BRANCH_6-3/po/ca.po	2008-06-30 13:46:09 UTC (rev 5211)
@@ -6,7 +6,7 @@
 msgstr ""
 "Project-Id-Version: fetchmail 6.3.5-b1\n"
 "Report-Msgid-Bugs-To: fetchmail-devel at lists.berlios.de\n"
-"POT-Creation-Date: 2008-06-17 15:06+0200\n"
+"POT-Creation-Date: 2008-06-30 15:43+0200\n"
 "PO-Revision-Date: 2006-08-31 19:22+0200\n"
 "Last-Translator: Ernest Adrogu? Calveras <eadrogue at gmx.net>\n"
 "Language-Team: Catalan <ca at dodds.net>\n"
@@ -2432,8 +2432,8 @@
 
 #: rcfile_y.y:431
 #, c-format
-msgid "File %s must have no more than -rwx--x--- (0710) permissions.\n"
-msgstr "El fitxer %s no pot tenir permisos m?s que -rwx--x--- (0710).\n"
+msgid "File %s must have no more than -rwx------ (0700) permissions.\n"
+msgstr "El fitxer %s no pot tenir permisos m?s que -rwx------ (0700).\n"
 
 #: rcfile_y.y:443
 #, c-format

Modified: branches/BRANCH_6-3/po/cs.po
===================================================================
--- branches/BRANCH_6-3/po/cs.po	2008-06-28 22:52:07 UTC (rev 5210)
+++ branches/BRANCH_6-3/po/cs.po	2008-06-30 13:46:09 UTC (rev 5211)
@@ -7,7 +7,7 @@
 msgstr ""
 "Project-Id-Version: fetchmail-6.2.6.alpha1\n"
 "Report-Msgid-Bugs-To: fetchmail-devel at lists.berlios.de\n"
-"POT-Creation-Date: 2008-06-17 15:06+0200\n"
+"POT-Creation-Date: 2008-06-30 15:43+0200\n"
 "PO-Revision-Date: 2005-07-03 03:57+0200\n"
 "Last-Translator: Miloslav Trmac <mitr at volny.cz>\n"
 "Language-Team: Czech <cs at li.org>\n"
@@ -2395,8 +2395,8 @@
 
 #: rcfile_y.y:431
 #, c-format
-msgid "File %s must have no more than -rwx--x--- (0710) permissions.\n"
-msgstr "Soubor %s nesm?? m??t opr??vn??n?? v??ce ne?? -rwx--x--- (0710).\n"
+msgid "File %s must have no more than -rwx------ (0700) permissions.\n"
+msgstr "Soubor %s nesm?? m??t opr??vn??n?? v??ce ne?? -rwx------ (0700).\n"
 
 #: rcfile_y.y:443
 #, c-format

Modified: branches/BRANCH_6-3/po/da.po
===================================================================
--- branches/BRANCH_6-3/po/da.po	2008-06-28 22:52:07 UTC (rev 5210)
+++ branches/BRANCH_6-3/po/da.po	2008-06-30 13:46:09 UTC (rev 5211)
@@ -2253,8 +2253,8 @@
 
 #: rcfile_y.y:428
 #, c-format
-msgid "File %s must have no more than -rwx--x--- (0710) permissions.\n"
-msgstr "Filen %s m? ikke flere tilladelser end -rwx--x--- (0710).\n"
+msgid "File %s must have no more than -rwx------ (0700) permissions.\n"
+msgstr "Filen %s m? ikke flere tilladelser end -rwx------ (0700).\n"
 
 #: rcfile_y.y:440
 #, c-format

Modified: branches/BRANCH_6-3/po/de.po
===================================================================
--- branches/BRANCH_6-3/po/de.po	2008-06-28 22:52:07 UTC (rev 5210)
+++ branches/BRANCH_6-3/po/de.po	2008-06-30 13:46:09 UTC (rev 5211)
@@ -8,7 +8,7 @@
 msgstr ""
 "Project-Id-Version: de\n"
 "Report-Msgid-Bugs-To: fetchmail-devel at lists.berlios.de\n"
-"POT-Creation-Date: 2008-06-17 15:06+0200\n"
+"POT-Creation-Date: 2008-06-30 15:43+0200\n"
 "PO-Revision-Date: 2006-11-27 04:32+0100\n"
 "Last-Translator: Matthias Andree <matthias.andree>\n"
 "Language-Team: Deutsch <de at li.org>\n"
@@ -2426,8 +2426,8 @@
 
 #: rcfile_y.y:431
 #, c-format
-msgid "File %s must have no more than -rwx--x--- (0710) permissions.\n"
-msgstr "Datei %s darf nicht mehr Zugriffrechte haben als -rwx--x-- (0710).\n"
+msgid "File %s must have no more than -rwx------ (0700) permissions.\n"
+msgstr "Datei %s darf nicht mehr Zugriffrechte haben als -rwx----- (0700).\n"
 
 #: rcfile_y.y:443
 #, c-format

Modified: branches/BRANCH_6-3/po/el.po
===================================================================
--- branches/BRANCH_6-3/po/el.po	2008-06-28 22:52:07 UTC (rev 5210)
+++ branches/BRANCH_6-3/po/el.po	2008-06-30 13:46:09 UTC (rev 5211)
@@ -2291,8 +2291,8 @@
 
 #: rcfile_y.y:428
 #, c-format
-msgid "File %s must have no more than -rwx--x--- (0710) permissions.\n"
-msgstr "?? ?????? %s ?? ?????? ?? ???? ???? ??? -rwx--x--- (0710) ??????.\n"
+msgid "File %s must have no more than -rwx------ (0700) permissions.\n"
+msgstr "?? ?????? %s ?? ?????? ?? ???? ???? ??? -rwx------ (0700) ??????.\n"
 
 #: rcfile_y.y:440
 #, c-format

Modified: branches/BRANCH_6-3/po/en_GB.po
===================================================================
--- branches/BRANCH_6-3/po/en_GB.po	2008-06-28 22:52:07 UTC (rev 5210)
+++ branches/BRANCH_6-3/po/en_GB.po	2008-06-30 13:46:09 UTC (rev 5211)
@@ -7,7 +7,7 @@
 msgstr ""
 "Project-Id-Version: fetchmail 6.3.5\n"
 "Report-Msgid-Bugs-To: fetchmail-devel at lists.berlios.de\n"
-"POT-Creation-Date: 2008-06-17 15:06+0200\n"
+"POT-Creation-Date: 2008-06-30 15:43+0200\n"
 "PO-Revision-Date: 2006-11-02 06:58-0000\n"
 "Last-Translator: David Lodge <dave at cirt.net>\n"
 "Language-Team: English (British) <en_gb at li.org>\n"
@@ -2344,8 +2344,8 @@
 
 #: rcfile_y.y:431
 #, c-format
-msgid "File %s must have no more than -rwx--x--- (0710) permissions.\n"
-msgstr "File %s must have no more than -rwx--x--- (0710) permissions.\n"
+msgid "File %s must have no more than -rwx------ (0700) permissions.\n"
+msgstr "File %s must have no more than -rwx------ (0700) permissions.\n"
 
 #: rcfile_y.y:443
 #, c-format

Modified: branches/BRANCH_6-3/po/es.po
===================================================================
--- branches/BRANCH_6-3/po/es.po	2008-06-28 22:52:07 UTC (rev 5210)
+++ branches/BRANCH_6-3/po/es.po	2008-06-30 13:46:09 UTC (rev 5211)
@@ -20,7 +20,7 @@
 msgstr ""
 "Project-Id-Version: fetchmail 6.3.4-rc1\n"
 "Report-Msgid-Bugs-To: fetchmail-devel at lists.berlios.de\n"
-"POT-Creation-Date: 2008-06-17 15:06+0200\n"
+"POT-Creation-Date: 2008-06-30 15:43+0200\n"
 "PO-Revision-Date: 2007-05-02 00:05+0200\n"
 "Last-Translator: H??ctor Garc??a <hector at el-mundo.net>\n"
 "Language-Team: Spanish <es at li.org>\n"
@@ -2508,8 +2508,8 @@
 
 #: rcfile_y.y:431
 #, c-format
-msgid "File %s must have no more than -rwx--x--- (0710) permissions.\n"
-msgstr "El archivo %s no debe tener mas que los permisos -rwx--x--- (0710).\n"
+msgid "File %s must have no more than -rwx------ (0700) permissions.\n"
+msgstr "El archivo %s no debe tener mas que los permisos -rwx------ (0700).\n"
 
 #: rcfile_y.y:443
 #, c-format

Modified: branches/BRANCH_6-3/po/fr.po
===================================================================
--- branches/BRANCH_6-3/po/fr.po	2008-06-28 22:52:07 UTC (rev 5210)
+++ branches/BRANCH_6-3/po/fr.po	2008-06-30 13:46:09 UTC (rev 5211)
@@ -15,7 +15,7 @@
 msgstr ""
 "Project-Id-Version: fetchmail 6.2.9-rc9\n"
 "Report-Msgid-Bugs-To: fetchmail-devel at lists.berlios.de\n"
-"POT-Creation-Date: 2008-06-17 15:06+0200\n"
+"POT-Creation-Date: 2008-06-30 15:43+0200\n"
 "PO-Revision-Date: 2005-12-18 11:50+0100\n"
 "Last-Translator: Matthias Andree <matthias.andree at gmx.de>\n"
 "Language-Team: French <traduc at traduc.org>\n"
@@ -2456,8 +2456,8 @@
 
 #: rcfile_y.y:431
 #, c-format
-msgid "File %s must have no more than -rwx--x--- (0710) permissions.\n"
-msgstr "Le fichier %s doit avoir au moins les permissions -rwx--x--- (0710)\n"
+msgid "File %s must have no more than -rwx------ (0700) permissions.\n"
+msgstr "Le fichier %s doit avoir au moins les permissions -rwx------ (0700)\n"
 
 #: rcfile_y.y:443
 #, c-format

Modified: branches/BRANCH_6-3/po/gl.po
===================================================================
--- branches/BRANCH_6-3/po/gl.po	2008-06-28 22:52:07 UTC (rev 5210)
+++ branches/BRANCH_6-3/po/gl.po	2008-06-30 13:46:09 UTC (rev 5211)
@@ -2310,7 +2310,7 @@
 
 #: rcfile_y.y:428
 #, c-format
-msgid "File %s must have no more than -rwx--x--- (0710) permissions.\n"
+msgid "File %s must have no more than -rwx------ (0700) permissions.\n"
 msgstr ""
 
 #: rcfile_y.y:440

Modified: branches/BRANCH_6-3/po/ja.po
===================================================================
--- branches/BRANCH_6-3/po/ja.po	2008-06-28 22:52:07 UTC (rev 5210)
+++ branches/BRANCH_6-3/po/ja.po	2008-06-30 13:46:09 UTC (rev 5211)
@@ -8,7 +8,7 @@
 msgstr ""
 "Project-Id-Version: fetchmail 6.3.8\n"
 "Report-Msgid-Bugs-To: fetchmail-devel at lists.berlios.de\n"
-"POT-Creation-Date: 2008-06-17 15:06+0200\n"
+"POT-Creation-Date: 2008-06-30 15:43+0200\n"
 "PO-Revision-Date: 2007-04-28 20:54+0900\n"
 "Last-Translator: Takeshi Hamasaki <hma at syd.odn.ne.jp>\n"
 "Language-Team: Japanese <translation-team-ja at lists.sourceforge.net>\n"
@@ -2407,8 +2407,8 @@
 
 #: rcfile_y.y:431
 #, c-format
-msgid "File %s must have no more than -rwx--x--- (0710) permissions.\n"
-msgstr "%s ??? -rwx--x--- (0710) ???????????????????????????????????????????????????????????????\n"
+msgid "File %s must have no more than -rwx------ (0700) permissions.\n"
+msgstr "%s ??? -rwx------ (0700) ???????????????????????????????????????????????????????????????\n"
 
 #: rcfile_y.y:443
 #, c-format

Modified: branches/BRANCH_6-3/po/pl.po
===================================================================
--- branches/BRANCH_6-3/po/pl.po	2008-06-28 22:52:07 UTC (rev 5210)
+++ branches/BRANCH_6-3/po/pl.po	2008-06-30 13:46:09 UTC (rev 5211)
@@ -8,7 +8,7 @@
 msgstr ""
 "Project-Id-Version: fetchmail 6.3.8\n"
 "Report-Msgid-Bugs-To: fetchmail-devel at lists.berlios.de\n"
-"POT-Creation-Date: 2008-06-17 15:06+0200\n"
+"POT-Creation-Date: 2008-06-30 15:43+0200\n"
 "PO-Revision-Date: 2007-04-27 17:28+0200\n"
 "Last-Translator: Jakub Bogusz <qboosh at pld-linux.org>\n"
 "Language-Team: Polish <translation-team-pl at lists.sourceforge.net>\n"
@@ -2442,8 +2442,8 @@
 
 #: rcfile_y.y:431
 #, c-format
-msgid "File %s must have no more than -rwx--x--- (0710) permissions.\n"
-msgstr "Plik %s nie mo?e mie? uprawnie? wi?kszych ni? -rwx--x--- (0710).\n"
+msgid "File %s must have no more than -rwx------ (0700) permissions.\n"
+msgstr "Plik %s nie mo?e mie? uprawnie? wi?kszych ni? -rwx------ (0700).\n"
 
 #: rcfile_y.y:443
 #, c-format

Modified: branches/BRANCH_6-3/po/pt_BR.po
===================================================================
--- branches/BRANCH_6-3/po/pt_BR.po	2008-06-28 22:52:07 UTC (rev 5210)
+++ branches/BRANCH_6-3/po/pt_BR.po	2008-06-30 13:46:09 UTC (rev 5211)
@@ -2315,7 +2315,7 @@
 
 #: rcfile_y.y:428
 #, c-format
-msgid "File %s must have no more than -rwx--x--- (0710) permissions.\n"
+msgid "File %s must have no more than -rwx------ (0700) permissions.\n"
 msgstr ""
 
 #: rcfile_y.y:440

Modified: branches/BRANCH_6-3/po/ru.po
===================================================================
--- branches/BRANCH_6-3/po/ru.po	2008-06-28 22:52:07 UTC (rev 5210)
+++ branches/BRANCH_6-3/po/ru.po	2008-06-30 13:46:09 UTC (rev 5211)
@@ -8,7 +8,7 @@
 msgstr ""
 "Project-Id-Version: fetchmail-6.3.8-rc2\n"
 "Report-Msgid-Bugs-To: fetchmail-devel at lists.berlios.de\n"
-"POT-Creation-Date: 2008-06-17 15:06+0200\n"
+"POT-Creation-Date: 2008-06-30 15:43+0200\n"
 "PO-Revision-Date: 2007-03-27 00:47+0300\n"
 "Last-Translator: Pavel Maryanov <acid_jack at ukr.net>\n"
 "Language-Team: Russian <ru at li.org>\n"
@@ -2426,8 +2426,8 @@
 
 #: rcfile_y.y:431
 #, c-format
-msgid "File %s must have no more than -rwx--x--- (0710) permissions.\n"
-msgstr "???????? %s ???????????? ?????????? ???????????????????? -rwx--x--- (0710), ???? ???? ?????????? ????????.\n"
+msgid "File %s must have no more than -rwx------ (0700) permissions.\n"
+msgstr "???????? %s ???????????? ?????????? ???????????????????? -rwx------ (0700), ???? ???? ?????????? ????????.\n"
 
 #: rcfile_y.y:443
 #, c-format

Modified: branches/BRANCH_6-3/po/sk.po
===================================================================
--- branches/BRANCH_6-3/po/sk.po	2008-06-28 22:52:07 UTC (rev 5210)
+++ branches/BRANCH_6-3/po/sk.po	2008-06-30 13:46:09 UTC (rev 5211)
@@ -2262,7 +2262,7 @@
 
 #: rcfile_y.y:428
 #, c-format
-msgid "File %s must have no more than -rwx--x--- (0710) permissions.\n"
+msgid "File %s must have no more than -rwx------ (0700) permissions.\n"
 msgstr ""
 
 #: rcfile_y.y:440

Modified: branches/BRANCH_6-3/po/sq.po
===================================================================
--- branches/BRANCH_6-3/po/sq.po	2008-06-28 22:52:07 UTC (rev 5210)
+++ branches/BRANCH_6-3/po/sq.po	2008-06-30 13:46:09 UTC (rev 5211)
@@ -7,7 +7,7 @@
 msgstr ""
 "Project-Id-Version: fetchmail 6.2.9-rc9\n"
 "Report-Msgid-Bugs-To: fetchmail-devel at lists.berlios.de\n"
-"POT-Creation-Date: 2008-06-17 15:06+0200\n"
+"POT-Creation-Date: 2008-06-30 15:43+0200\n"
 "PO-Revision-Date: 2005-11-18 22:25+0200\n"
 "Last-Translator: Besnik Bleta <besnik at spymac.com>\n"
 "Language-Team: Albanian <translation-team-sq at lists.sourceforge.net>\n"
@@ -2423,8 +2423,8 @@
 
 #: rcfile_y.y:431
 #, c-format
-msgid "File %s must have no more than -rwx--x--- (0710) permissions.\n"
-msgstr "Kartela %s duhet t? ket? jo m? shum? se lejet -rwx--x--- (0710).\n"
+msgid "File %s must have no more than -rwx------ (0700) permissions.\n"
+msgstr "Kartela %s duhet t? ket? jo m? shum? se lejet -rwx------ (0700).\n"
 
 #: rcfile_y.y:443
 #, c-format

Modified: branches/BRANCH_6-3/po/tr.po
===================================================================
--- branches/BRANCH_6-3/po/tr.po	2008-06-28 22:52:07 UTC (rev 5210)
+++ branches/BRANCH_6-3/po/tr.po	2008-06-30 13:46:09 UTC (rev 5211)
@@ -2338,8 +2338,8 @@
 
 #: rcfile_y.y:428
 #, c-format
-msgid "File %s must have no more than -rwx--x--- (0710) permissions.\n"
-msgstr "Dosyan?n (%s) izinleri -rwx--x--- (0710)'den ?ok olmamal?.\n"
+msgid "File %s must have no more than -rwx------ (0700) permissions.\n"
+msgstr "Dosyan?n (%s) izinleri -rwx------ (0700)'den ?ok olmamal?.\n"
 
 #: rcfile_y.y:440
 #, c-format

Modified: branches/BRANCH_6-3/po/vi.po
===================================================================
--- branches/BRANCH_6-3/po/vi.po	2008-06-28 22:52:07 UTC (rev 5210)
+++ branches/BRANCH_6-3/po/vi.po	2008-06-30 13:46:09 UTC (rev 5211)
@@ -6,7 +6,7 @@
 msgstr ""
 "Project-Id-Version: fetchmail 6.3.8\n"
 "Report-Msgid-Bugs-To: fetchmail-devel at lists.berlios.de\n"
-"POT-Creation-Date: 2008-06-17 15:06+0200\n"
+"POT-Creation-Date: 2008-06-30 15:43+0200\n"
 "PO-Revision-Date: 2007-05-28 21:48+0930\n"
 "Last-Translator: Clytie Siddall <clytie at riverland.net.au>\n"
 "Language-Team: Vietnamese <vi-VN at googlegroups.com>\n"
@@ -2409,9 +2409,9 @@
 
 #: rcfile_y.y:431
 #, c-format
-msgid "File %s must have no more than -rwx--x--- (0710) permissions.\n"
+msgid "File %s must have no more than -rwx------ (0700) permissions.\n"
 msgstr ""
-"Kh??ng cho ph??p t???p tin %s c?? quy???n h???n l???n h??n ?? -rws--x--- ?? (0710).\n"
+"Kh??ng cho ph??p t???p tin %s c?? quy???n h???n l???n h??n ?? -rwx------ ?? (0700).\n"
 
 #: rcfile_y.y:443
 #, c-format

Modified: branches/BRANCH_6-3/rcfile_y.y
===================================================================
--- branches/BRANCH_6-3/rcfile_y.y	2008-06-28 22:52:07 UTC (rev 5210)
+++ branches/BRANCH_6-3/rcfile_y.y	2008-06-30 13:46:09 UTC (rev 5211)
@@ -428,7 +428,7 @@
 #endif /* __CYGWIN__ */
     if (statbuf.st_mode & (S_IRGRP | S_IWGRP | S_IROTH | S_IWOTH | S_IXOTH))
     {
-	fprintf(stderr, GT_("File %s must have no more than -rwx--x--- (0710) permissions.\n"), 
+	fprintf(stderr, GT_("File %s must have no more than -rwx------ (0700) permissions.\n"), 
 		pathname);
 	return(PS_IOERR);
     }



